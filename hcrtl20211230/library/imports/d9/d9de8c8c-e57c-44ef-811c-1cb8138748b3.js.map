{"version":3,"sources":["assets\\script\\data\\UserData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport BaseInstanceClass from \"../manager/BaseInstanceClass\";\r\nimport EventDefine from \"../util/EventDefine\";\r\nimport SkinShopItemData from \"../util/SkinShopItemData\";\r\nimport WeaponItemData from \"../util/WeaponItemData\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nenum Platform {\r\n    platformG7,\r\n    platformG71,\r\n    platformG72,\r\n}\r\n\r\n@ccclass\r\nexport default class UserData {\r\n\r\n    private _localData: any;\r\n\r\n    public TempStandX: number = 150;\r\n\r\n    public platformType: number = 1;  //0  - G7   /   1 - G7-1      / 2   -  G7-2   //平台标识\r\n\r\n\r\n\r\n    public init():void {\r\n        let str = localStorage.getItem(\"hcrtl\");\r\n        if (str == null) {\r\n            this._localData = {};\r\n        }\r\n        else {\r\n            this._localData = JSON.parse(str);\r\n        }\r\n    }\r\n\r\n    private LastInAdTime: number = 0;\r\n\r\n    public setData(key:string, value:any):void{\r\n        this._localData[key] = value;\r\n        this.saveData();\r\n        this.dispatchEven(key);\r\n    }\r\n\r\n    private saveData(): void {\r\n        localStorage.setItem(\"hcrtl\", JSON.stringify(this._localData));\r\n    }\r\n\r\n    public getData(key: string): any {\r\n        if (this._localData[key] == undefined || this._localData[key] == null ) { //|| key == localStorageKey.SHOP_DATAS || key == localStorageKey.WEAPON_DATAS\r\n        }\r\n        else {         \r\n            return this._localData[key];          \r\n        }\r\n        let defaultValue;//默认值\r\n\r\n        switch(key) {\r\n            case localStorageKey.GOLD:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.USING_SKIN_INDEX:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.SHOP_DATAS:\r\n                defaultValue = this.getInitShopData();\r\n                break;\r\n            case localStorageKey.PER_GET_SKIN_VICTORY:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.WEAPON_DATAS:\r\n                defaultValue = this.getInitWeaponData();\r\n                break;\r\n            case localStorageKey.USING_WEAPON_IDX:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.COMEON_FIRST:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.SIGNIN_DATA:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.SIGNIN_NUM:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.NEW_PLAYER_DATA:\r\n                defaultValue = this.getNewPlayerData();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (defaultValue == undefined) {\r\n            defaultValue = 0;\r\n        }\r\n        //存储一遍（）\r\n        this.setData(key, defaultValue);\r\n        return defaultValue;\r\n    }\r\n    /**获取初始化的皮肤商店数据 */\r\n    private getInitShopData():SkinShopItemData[] {\r\n        let datas:SkinShopItemData[] = [];\r\n        for (let i = 0; i < 9; i++) {\r\n            let itemData = new SkinShopItemData();\r\n            itemData.id = i;\r\n            itemData.bUnlock = i==0?true:false;//默认皮肤解锁 \r\n            itemData.resName = `p${i}`;\r\n            itemData.costType = (i < 4 ? 1 : 0);\r\n            itemData.costNum = 5000;\r\n            if (i == 7 || i == 8) {\r\n                itemData.costType = 2;\r\n            }\r\n            switch(i) {\r\n                case 0:\r\n                    itemData.resName = \"zhu\";\r\n                    break;\r\n                case 1:\r\n                    break;\r\n                case 2:\r\n                    break;\r\n                case 3:\r\n                    break;\r\n                case 4:\r\n                    break;\r\n                case 5:\r\n                    break;\r\n                case 6:\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            datas.push(itemData);\r\n        }\r\n        return datas;\r\n    }\r\n\r\n    /**获取初始化的武器商店数据 */\r\n    private getInitWeaponData(): WeaponItemData[] {\r\n        let datas: WeaponItemData[] = [];\r\n        for (let i = 0; i < 9; i++) {\r\n            let itemData = new WeaponItemData();\r\n            itemData.id = i;\r\n            itemData.bUnlock = i == 0 ? true : false;//默认武器解锁        \r\n            itemData.resName = `wq${i + 1}`;            \r\n            if (i < 6 && i > 1) {\r\n                itemData.costType = 1;\r\n                itemData.costNum = 0;\r\n            }\r\n            else if (i == 1)\r\n            {\r\n                itemData.costNum = 0//2000;\r\n                itemData.costType = 2;\r\n            }\r\n            else  {\r\n                itemData.costNum = 6000;\r\n                itemData.costType = 0;\r\n            }            \r\n            datas.push(itemData);\r\n        }\r\n\r\n        return datas;\r\n    }\r\n\r\n    //获取新用户的日期\r\n    private getNewPlayerData() {\r\n        var cos = new Date().toLocaleDateString();\r\n        this.setData(localStorageKey.NEW_PLAYER_DATA, cos)\r\n        return cos;\r\n    }\r\n\r\n    //获取当前是否是新用户\r\n    public getNewPlayerStatus() {\r\n        var data1 = this.getData(localStorageKey.NEW_PLAYER_DATA);\r\n        var data2 = new Date().toLocaleDateString();\r\n        return data1 == data2;\r\n    }\r\n\r\n    /**派发对应的事件 */\r\n    private dispatchEven(event:string):void {\r\n        switch(event) {\r\n            case localStorageKey.GOLD:\r\n                cc.find(\"Canvas\").emit(EventDefine.GOLD_CHANGE);\r\n                break;\r\n            case localStorageKey.USING_SKIN_INDEX:\r\n                cc.find(\"Canvas\").emit(EventDefine.USING_SKIN_CHANGE);\r\n                break;\r\n        }\r\n    }\r\n    //判断有没有到达20 秒的时间间隔\r\n    public GetIntAdStatus(): boolean {\r\n        //var myDate = Date.parse(new Date().toString());\r\n        //if (this.LastInAdTime == 0) {\r\n        //    this.LastInAdTime = myDate;\r\n        //    return true;\r\n        //}\r\n        //if ((myDate - this.LastInAdTime) >= 150000) {\r\n        //    this.LastInAdTime = myDate;\r\n        //    return true;\r\n        //}\r\n        //else {\r\n        //    return false;\r\n        //}\r\n        return true;\r\n    }\r\n\r\n}\r\nexport class localStorageKey {\r\n    /**金币 */\r\n    static GOLD = \"GOLD\";\r\n    /**皮肤商店数据 */\r\n    static SHOP_DATAS = \"SHOP_DATAS\";\r\n    /**当前使用的皮肤的序号 */\r\n    static USING_SKIN_INDEX = \"USING_SKIN_INDEX\";\r\n    /**通关获取皮肤的进度 */\r\n    static PER_GET_SKIN_VICTORY = \"PER_GET_SKIN_VICTORY\";\r\n    //当前所使用的武器\r\n    static USING_WEAPON_IDX = \"USING_WEAPON_IDX\";\r\n    //当前的武器数据\r\n    static WEAPON_DATAS = \"WEAPON_DATAS\";\r\n    //当前第一次进入游戏记录\r\n    static COMEON_FIRST = \"COMEON_FIRST\";\r\n    //日期记录\r\n    static SIGNIN_DATA = \"SIGNIN_DATA\";\r\n    //签到次数\r\n    static SIGNIN_NUM = \"SIGNIN_NUM\";\r\n    //新用户日期\r\n    static NEW_PLAYER_DATA = \"NEW_PLAYER_DATA\"\r\n}\r\n\r\nexport const userData = new UserData();\r\n"]}