{"version":3,"sources":["assets\\script\\data\\UserData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport BaseInstanceClass from \"../manager/BaseInstanceClass\";\r\nimport EventDefine from \"../util/EventDefine\";\r\nimport SkinShopItemData from \"../util/SkinShopItemData\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class UserData {\r\n\r\n    private _localData: any;\r\n\r\n    public init():void {\r\n        let str = localStorage.getItem(\"hcrtl\");\r\n        if (str == null) {\r\n            this._localData = {};\r\n        }\r\n        else {\r\n            this._localData = JSON.parse(str);\r\n        }\r\n    }\r\n\r\n    public setData(key:string, value:any):void{\r\n        this._localData[key] = value;\r\n        this.saveData();\r\n        this.dispatchEven(key);\r\n    }\r\n\r\n    private saveData(): void {\r\n        localStorage.setItem(\"hcrtl\", JSON.stringify(this._localData));\r\n    }\r\n\r\n    public getData(key:string):any {\r\n        if (this._localData[key] != undefined) {\r\n            return this._localData[key];\r\n        }\r\n        let defaultValue;//默认值\r\n        switch(key) {\r\n            case localStorageKey.GOLD:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.USING_SKIN_INDEX:\r\n                defaultValue = 0;\r\n                break;\r\n            case localStorageKey.SHOP_DATAS:\r\n                defaultValue = this.getInitShopData();\r\n                break;\r\n            case localStorageKey.PER_GET_SKIN_VICTORY:\r\n                defaultValue = 0;\r\n            default:\r\n                break;\r\n        }\r\n        if (defaultValue == undefined) {\r\n            defaultValue = 0;\r\n        }\r\n        //存储一遍（）\r\n        this.setData(key, defaultValue);\r\n        return defaultValue;\r\n    }\r\n    /**获取初始化的皮肤商店数据 */\r\n    private getInitShopData():SkinShopItemData[] {\r\n        let datas:SkinShopItemData[] = [];\r\n        for (let i = 0; i < 7; i++) {\r\n            let itemData = new SkinShopItemData();\r\n            itemData.id = i;\r\n            itemData.bUnlock = i==0?true:false;//默认皮肤解锁\r\n            itemData.resName = `p${i}`;\r\n            itemData.costType = (i < 4 ? 1 : 0);\r\n            itemData.costNum = 5000;\r\n            switch(i) {\r\n                case 0:\r\n                    itemData.resName = \"zhu\";\r\n                    break;\r\n                case 1:\r\n                    break;\r\n                case 2:\r\n                    break;\r\n                case 3:\r\n                    break;\r\n                case 4:\r\n                    break;\r\n                case 5:\r\n                    break;\r\n                case 6:\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            datas.push(itemData);\r\n        }\r\n        return datas;\r\n    }\r\n    /**派发对应的事件 */\r\n    private dispatchEven(event:string):void {\r\n        switch(event) {\r\n            case localStorageKey.GOLD:\r\n                cc.find(\"Canvas\").emit(EventDefine.GOLD_CHANGE);\r\n                break;\r\n            case localStorageKey.USING_SKIN_INDEX:\r\n                cc.find(\"Canvas\").emit(EventDefine.USING_SKIN_CHANGE);\r\n                break;\r\n        }\r\n    }\r\n}\r\nexport class localStorageKey {\r\n    /**金币 */\r\n    static GOLD = \"GOLD\";\r\n    /**皮肤商店数据 */\r\n    static SHOP_DATAS = \"SHOP_DATAS\";\r\n    /**当前使用的皮肤的序号 */\r\n    static USING_SKIN_INDEX = \"USING_SKIN_INDEX\";\r\n    /**通关获取皮肤的进度 */\r\n    static PER_GET_SKIN_VICTORY = \"PER_GET_SKIN_VICTORY\";\r\n}\r\n\r\nexport const userData = new UserData();\r\n"]}