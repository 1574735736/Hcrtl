{"version":3,"sources":["assets\\script\\gameScence\\AndroidAdView.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAOM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAA2C,iCAAY;IADvD;QAAA,qEA0CC;QAvCG,eAAS,GAAa,IAAI,CAAC;QAC3B,gBAAU,GAAY,IAAI,CAAC;QAC3B,gBAAU,GAAW,CAAC,CAAC;QACvB,gBAAU,GAAa,IAAI,CAAC;;IAoChC,CAAC;IAlCG,6BAAK,GAAL;QACI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,mCAAmC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAChG,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,gCAAgC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACvE,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACrD,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO;YACjC,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,yCAAyC,EAAE,0BAA0B,EAAE,KAAK,CAAC,CAAC;QAElH,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;QAC/B,IAAI,QAAQ,GAAG;YACX,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;YACnE,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;gBACrB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC/B,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,YAAY,CAAC;gBACrC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;aACjC;QACL,CAAC,CAAA;QAED,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;IAE/B,CAAC;IAED,8BAAM,GAAN,UAAO,IAAc;QACjB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IAC3B,CAAC;IAED,+BAAO,GAAP;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO;YACjC,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,yCAAyC,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;QACvG,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;QACD,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAxCgB,aAAa;QADjC,OAAO;OACa,aAAa,CAyCjC;IAAD,oBAAC;CAzCD,AAyCC,CAzC0C,EAAE,CAAC,SAAS,GAyCtD;kBAzCoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport SdkManager from \"../util/SdkManager\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AndroidAdView extends cc.Component {\r\n\r\n    m_TimeLab: cc.Label = null;\r\n    m_BtnClose: cc.Node = null;\r\n    m_LastTime: number = 5;\r\n    m_CallFunc: Function = null;\r\n\r\n    start() {\r\n        this.m_TimeLab = cc.find(\"img_topbg/img_timebg/lab_lastTime\", this.node).getComponent(cc.Label);\r\n        this.m_BtnClose = cc.find(\"img_topbg/img_timebg/btn_close\", this.node);\r\n        this.m_BtnClose.on(\"click\", this.OnClose.bind(this));\r\n        if (cc.sys.platform == cc.sys.ANDROID) \r\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/NativeAdManager\", \"JsCall_showAdIfAvailable\", \"()V\");\r\n\r\n        this.m_BtnClose.active = false;\r\n        var callBack = function () {\r\n            this.m_LastTime--;\r\n            this.m_TimeLab.string = \"Reward in \" + this.m_LastTime + \"seconds\";\r\n            if (this.m_LastTime < 0) {\r\n                this.unschedule(this.callback);\r\n                this.m_TimeLab.string = \"Award send\";\r\n                this.m_BtnClose.active = true;\r\n            }\r\n        }\r\n\r\n        this.schedule(callBack, 1);\r\n\r\n    }\r\n\r\n    onInit(func: Function) {\r\n        this.m_CallFunc = func;\r\n    }\r\n\r\n    OnClose() {\r\n        if (cc.sys.platform == cc.sys.ANDROID) \r\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/NativeAdManager\", \"JsCall_hideAd\", \"()V\");\r\n        if (this.m_CallFunc) {\r\n            this.m_CallFunc();\r\n        }\r\n        this.node.destroy();\r\n    }\r\n}\r\n"]}