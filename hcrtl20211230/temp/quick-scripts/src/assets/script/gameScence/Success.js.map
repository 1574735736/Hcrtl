{"version":3,"sources":["assets\\script\\gameScence\\Success.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport LevelData from \"../data/LevelData\";\r\nimport GameScence from \"./GameScence\";\r\nimport { FirebaseReport, FirebaseKey } from \"../util/FirebaseReport\";\r\nimport SpineManager from \"../manager/SpineManager\";\r\nimport UserData, { localStorageKey, userData } from \"../data/UserData\";\r\nimport SkinShopItemData from \"../util/SkinShopItemData\";\r\nimport Utils from \"../util/Utils\";\r\nimport SdkManager from \"../util/SdkManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Success extends cc.Component {\r\n    @property(cc.Label)\r\n    lb_gold:cc.Label = null;\r\n\r\n    @property(sp.Skeleton)\r\n    animVictory:sp.Skeleton = null;\r\n    \r\n    @property(sp.Skeleton)\r\n    roleModel:sp.Skeleton = null;\r\n\r\n    @property(cc.Label)\r\n    lb_reward:cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    randomBar:cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lb_adReward:cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    lb_NoThanks:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    skinLight:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    skinProgressBar_1:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    skinProgressBar_2:cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    perOfSkin: cc.Label = null;\r\n\r\n    weapon: sp.Skeleton = null;\r\n\r\n    private static _instance:Success = null;\r\n\r\n    private moveAbs = 272;\r\n\r\n    private lastPointIndex:number = 0;\r\n    private nowPointIndex:number = 0;\r\n    private pointerArr:Array<cc.Sprite>;\r\n\r\n    private rateArr:number[];\r\n    /**是否可点击皮肤入口按钮 */\r\n    private bCanClickSkinBtn:boolean = false;\r\n    /**本次是否已经获得了新皮肤 */\r\n    private bHadGetNewSkin:boolean = false;\r\n\r\n    private newSkinPanel:cc.Node;\r\n\r\n    private btn_getSkin:cc.Node;\r\n\r\n    private reward_gold: number;\r\n\r\n    private flay_ani: sp.Skeleton = null;\r\n\r\n    private victoryIcon: cc.Sprite = null;\r\n\r\n    onLoad () {\r\n        Success._instance = this;\r\n        let numContainer = this.node.getChildByName(\"bar_randomRate\");\r\n        let rewardRate_2 = numContainer.getChildByName(\"white_2\").getComponent(cc.Sprite);\r\n        let rewardRate_3 = numContainer.getChildByName(\"white_3\").getComponent(cc.Sprite);\r\n        let rewardRate_4 = numContainer.getChildByName(\"white_4\").getComponent(cc.Sprite);\r\n        let rewardRate_5 = numContainer.getChildByName(\"white_5\").getComponent(cc.Sprite);\r\n        let rewardRate_4_1 = numContainer.getChildByName(\"white_4_1\").getComponent(cc.Sprite);\r\n        let rewardRate_3_1 = numContainer.getChildByName(\"white_3_1\").getComponent(cc.Sprite);\r\n        let rewardRate_2_1 = numContainer.getChildByName(\"white_2_1\").getComponent(cc.Sprite);\r\n        this.pointerArr = [rewardRate_2, rewardRate_3, rewardRate_4, rewardRate_5, rewardRate_4_1, rewardRate_3_1, rewardRate_2_1];\r\n        this.victoryIcon = this.node.getChildByName(\"btn_video_victory\").getComponent(cc.Sprite);\r\n        this.rateArr = [2, 3, 4, 5, 4, 3, 2];\r\n\r\n        this.weapon = cc.find(\"spine_weapon\", this.node.parent.parent).getComponent(sp.Skeleton);\r\n\r\n        this.flay_ani = cc.find(\"flay_ani\", this.node).getComponent(sp.Skeleton);\r\n\r\n        this.newSkinPanel = this.node.getChildByName(\"panel_newSkin\");\r\n        this.btn_getSkin = this.node.getChildByName(\"btn_getSkin\");\r\n    }\r\n    comeInLevel: number = 0;\r\n    protected onEnable(): void {\r\n        //this.dispatchFirebaseKey(LevelData.curLevel);\r\n        this.comeInLevel = LevelData.curLevel;\r\n        LevelData.curLevel++;\r\n        LevelData.saveLevel();\r\n        let goldNum = userData.getData(localStorageKey.GOLD);\r\n        this.lb_gold.string = goldNum + \"\";\r\n        this.reward_gold = 100;\r\n        this.lb_reward.string = \"100\";\r\n        this.newSkinPanel.active = false;\r\n        \r\n        this.lb_NoThanks.active = false;\r\n        if (this.comeInLevel > 1) {\r\n            this.scheduleOnce(() => {\r\n                this.lb_NoThanks.active = true;\r\n            }, 3);\r\n        }        \r\n\r\n        SpineManager.getInstance().playSpinAnimation(this.roleModel, \"shengli\", true, null);\r\n\r\n        SpineManager.getInstance().playSpinAnimation(this.animVictory, \"biaoti\", false, () => {\r\n            SpineManager.getInstance().playSpinAnimation(this.animVictory, \"biaoti2\", true, null);\r\n        });\r\n        \r\n        this.lastPointIndex = 0;\r\n        this.nowPointIndex = 0;\r\n\r\n        this.randomBar.x = -this.moveAbs;\r\n        this.changeBarPos();\r\n\r\n        this.onSetIcon(this.victoryIcon);\r\n        this.updatePercentOfSkin();\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        cc.Tween.stopAllByTarget(this.randomBar);\r\n        cc.Tween.stopAllByTarget(this.skinLight);\r\n    }\r\n\r\n    private dispatchFirebaseKey(level:number):void {\r\n        switch(level) {\r\n            case 1:\r\n                 FirebaseReport.reportInformation(FirebaseKey.level_wancheng_1);\r\n                 break;\r\n            case 2:\r\n                 FirebaseReport.reportInformation(FirebaseKey.level_wancheng_2);\r\n                 break;\r\n            case 3:\r\n                 FirebaseReport.reportInformation(FirebaseKey.level_wancheng_3);\r\n                 break;\r\n            case 4:\r\n                 FirebaseReport.reportInformation(FirebaseKey.level_wancheng_4);\r\n                 break;\r\n            case 5:\r\n                 FirebaseReport.reportInformation(FirebaseKey.level_wancheng_5);\r\n                 break;\r\n            case 10:\r\n                 FirebaseReport.reportInformation(FirebaseKey.level_wancheng_10);\r\n                 break;\r\n            case 15:\r\n                 FirebaseReport.reportInformation(FirebaseKey.level_wancheng_15);\r\n                 break;\r\n            case 20:\r\n                 FirebaseReport.reportInformation(FirebaseKey.level_wancheng_20);\r\n                 break;\r\n            default:\r\n                 break;\r\n        }\r\n    }\r\n\r\n    private changeBarPos():void {\r\n        cc.tween(this.randomBar)\r\n        .to(1, {x:this.moveAbs})\r\n        .to(1, {x: -this.moveAbs})\r\n        .call(()=> {\r\n            this.changeBarPos();\r\n        })\r\n        .start();\r\n    }\r\n\r\n    private updatePercentOfSkin():void {\r\n        //先判断所有皮肤是否都已经解锁\r\n        let skinDatas = userData.getData(localStorageKey.SHOP_DATAS) as SkinShopItemData[];\r\n        let bHavaLockSkin = false;\r\n        for (let data of skinDatas) {\r\n            if (!data.bUnlock) {//有未解锁的皮肤\r\n                bHavaLockSkin = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!bHavaLockSkin) {//皮肤都已经解锁\r\n            this.btn_getSkin.active = false;\r\n            return;\r\n        }\r\n\r\n        this.btn_getSkin.active = true;\r\n\r\n\r\n     \r\n        //this.com.level_node.children[1].getComponent(cc.Label).string = String(a);\r\n      \r\n\r\n\r\n        let skinPer = userData.getData(localStorageKey.PER_GET_SKIN_VICTORY);\r\n        let oldPer = skinPer;\r\n        skinPer += 20;\r\n        if (skinPer > 100) {\r\n            skinPer = 100;\r\n        }\r\n        //let sdk: any = {\r\n        //    a: 0,\r\n        //}\r\n        //sdk.a = oldPer;\r\n        //cc.tween(sdk)\r\n        //    .to(oldPer, { a: skinPer }, {\r\n        //        progress: (start, end, current, time) => {\r\n        //            // this.lab.string = Math.round(start + (end - start) * time) + '';//修改页面上的值\r\n        //            //console.log('修改ing', start + (end - start) * time);\r\n        //            //this.com.level_node.children[1].getComponent(cc.Label).string = (this.server_data.cardRate[2] * 100) / 100).toFixed(2) + '%';\r\n        //            this.perOfSkin.string = Math.round(current) + \"%\";\r\n        //            return start + (end - start) * time;\r\n        //        },\r\n        //    })\r\n        //    .start();\r\n\r\n        var func = function () {\r\n            oldPer += 1;\r\n            if (oldPer >= skinPer) {\r\n                oldPer = skinPer;\r\n                callBack();\r\n                this.calculateAngle(oldPer);\r\n                this.perOfSkin.string = oldPer + \"%\";\r\n                this.unschedule(func);\r\n            }\r\n            else {\r\n                this.calculateAngle(oldPer);\r\n                this.perOfSkin.string = oldPer + \"%\";\r\n            }\r\n        }\r\n\r\n        this.schedule(func, 0.05);\r\n        \r\n        //this.perOfSkin.string = skinPer + \"%\";\r\n        //this.calculateAngle(skinPer);\r\n\r\n        var callBack = () => {\r\n            if (skinPer >= 100) {\r\n                this.bCanClickSkinBtn = true;\r\n                this.bHadGetNewSkin = false;\r\n                userData.setData(localStorageKey.PER_GET_SKIN_VICTORY, 0);//重置进度\r\n                this.showSkinLight();\r\n                this.showNewSkinPanel();//主动打开获得皮肤界面\r\n            }\r\n            else {\r\n                this.bCanClickSkinBtn = false;\r\n                userData.setData(localStorageKey.PER_GET_SKIN_VICTORY, skinPer);\r\n                this.skinLight.active = false;\r\n            }\r\n        };\r\n        \r\n    }\r\n\r\n    private calculateAngle(skinPer:number):void {\r\n        if (skinPer < 0) {\r\n            skinPer = 0;\r\n        }\r\n        else if (skinPer > 100) {\r\n            skinPer = 100;\r\n        }\r\n        if (skinPer <= 50) {\r\n            this.skinProgressBar_2.angle = 180;\r\n            this.skinProgressBar_1.angle = -(skinPer * 18)/5;//等效-(skinPer/50 * 180);\r\n        }\r\n        else {\r\n            this.skinProgressBar_1.angle = -180;\r\n            this.skinProgressBar_2.angle = 180 - (skinPer - 50)/50 * 180;\r\n        }\r\n    }\r\n    /**展示皮肤入口按钮光效 */\r\n    private showSkinLight():void {\r\n        this.skinLight.active = true\r\n        this.skinLight.angle = 0;\r\n        this.changeSkinLight();\r\n    }\r\n\r\n    private changeSkinLight():void {\r\n        cc.tween(this.skinLight)\r\n            .to(0.5, {angle: -20})\r\n            .to(0.5, {angle: 0})\r\n            .call(()=> {\r\n                this.changeSkinLight();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    public static JavaCall_goNextLevel():void {\r\n        Success._instance.goNextLevel(true);\r\n    }\r\n\r\n    goMastGoNextLevel() {\r\n\r\n        let own = userData.getData(localStorageKey.GOLD);\r\n        own += this.reward_gold;\r\n        userData.setData(localStorageKey.GOLD, own);    \r\n        GameScence.Instance.onReloadLevel();\r\n        this.node.active = false;\r\n    }\r\n\r\n    goNextLevel(bVideo: boolean = false) {\r\n        this.flay_ani.node.active = true;\r\n        this.isEndAni = true;   \r\n\r\n        SpineManager.getInstance().playSpinAnimation(this.flay_ani, \"biaoti2\", false, () => {\r\n            this.flay_ani.node.active = false;\r\n            let own = userData.getData(localStorageKey.GOLD);\r\n            if (bVideo) {\r\n                own += this.rateOfRewardByVideo * this.reward_gold;\r\n            }\r\n            else {\r\n                own += this.reward_gold;\r\n            }\r\n            userData.setData(localStorageKey.GOLD, own);    \r\n            this.lb_gold.string = own + \"\";\r\n\r\n      \r\n\r\n            this.scheduleOnce(function () {\r\n                GameScence.Instance.onReloadLevel();\r\n                this.node.active = false;\r\n            }, 0.5);\r\n\r\n        });  \r\n        \r\n    }\r\n\r\n    private onBtnHomeClick():void {\r\n        let own = userData.getData(localStorageKey.GOLD);\r\n        own += this.reward_gold;\r\n        userData.setData(localStorageKey.GOLD, own);\r\n\r\n        if (userData.GetIntAdStatus()) {\r\n            SdkManager.GetInstance().JavaInterstitialAds(\"\", () => {\r\n                cc.director.loadScene(\"MainScene\");\r\n            })\r\n        }\r\n        else {\r\n            cc.director.loadScene(\"MainScene\");\r\n        }  \r\n\r\n        //cc.director.loadScene(\"MainScene\");\r\n    }\r\n\r\n    private onBtnNoThanksClick(): void {\r\n        if (this.isEndAni) {\r\n            return;\r\n        }\r\n        FirebaseReport.reportInformation(FirebaseKey.shengli_ad2_next);\r\n        FirebaseReport.reportAdjustParam(\"6aj129\");\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.adjust_win_2);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_win_2);\r\n\r\n        if (cc.sys.platform == cc.sys.ANDROID && userData.GetIntAdStatus()) {       \r\n\r\n            SdkManager.GetInstance().JavaInterstitialAds(\"shengli_ad2_next\", () => {\r\n                //this.goNextLevel();\r\n                this.goMastGoNextLevel();\r\n            })\r\n\r\n            //jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/InterstitialAdManager\", \"JsCall_showAdIfAvailable\", \"(Ljava/lang/String;Ljava/lang/String;)V\",'cc[\"Success\"].JavaCall_noThanksCallback()', \"shengli_ad2_next\");\r\n        }\r\n        else {\r\n            //this.goNextLevel();\r\n            this.goMastGoNextLevel();\r\n        }\r\n        //dkManager.GetInstance().JavaInterstitialAds(\"shengli_ad2_next\", () => { this.goNextLevel(); });\r\n    }\r\n\r\n    public static JavaCall_noThanksCallback():void {\r\n        Success._instance.goNextLevel();\r\n    }\r\n\r\n    private rateOfRewardByVideo:number;\r\n\r\n    clickTime: number = 0;\r\n    isEndAni: boolean = false;\r\n\r\n    private onBtnVideoClick(): void {\r\n        if (this.isEndAni) {\r\n            return;\r\n        }\r\n   /*     this.onSetIcon(this.victoryIcon);*/\r\n        var myDate = Date.parse(new Date().toString());\r\n        if ((myDate - this.clickTime) < 2000) {\r\n            return;\r\n        }\r\n        this.clickTime = myDate;\r\n        var selectNode = cc.find(\"bar_randomRate/k\" + (this.nowPointIndex + 1), this.node)\r\n        selectNode.active = true;\r\n\r\n        selectNode.opacity = 0;\r\n        var pseq1 = cc.sequence(cc.fadeTo(0.25, 0), cc.callFunc(() => {\r\n            selectNode.runAction(pseq2);\r\n        }));\r\n        var pseq2 = cc.sequence(cc.fadeTo(0.25, 255), cc.callFunc(() => {\r\n            selectNode.runAction(pseq1);\r\n        }));\r\n        selectNode.runAction(pseq2);       \r\n\r\n        this.rateOfRewardByVideo = this.rateArr[this.nowPointIndex];\r\n        cc.Tween.stopAllByTarget(this.randomBar);\r\n        this.scheduleOnce(function () {            \r\n            // if (cc.sys.platform == cc.sys.ANDROID) {\r\n                \r\n            //     jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/RewardedAdManager\", \"JsCall_showAdIfAvailable\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\", 'cc[\"Success\"].JavaCall_goNextLevel()', 'cc[\"Success\"].JavaCall_noAdCallback()', \"shengli_ad2_beishu\", \"\");\r\n            // }\r\n            // else {\r\n            //     this.goNextLevel(true);\r\n            // }\r\n            FirebaseReport.reportInformation(FirebaseKey.shengli_ad2_beishu);\r\n            FirebaseReport.reportAdjustParam(\"5g50d1\");\r\n            FirebaseReport.reportAdjustParam(FirebaseKey.adjust_win_1);\r\n            FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_win_1);\r\n\r\n            if (this.comeInLevel == 1) {\r\n                this.goNextLevel(true);\r\n            }\r\n            else {\r\n                SdkManager.GetInstance().JavaRewardedAds(\"shengli_ad2_beishu\", () => { this.goNextLevel(true); }, () => { this.noAdCallback(); });\r\n                this.m_BackFunc = () => { this.goNextLevel(true); }\r\n            }            \r\n        }, 0.5);\r\n        \r\n       \r\n        //SdkManager.GetInstance().JavaRewardedAds(\"shengli_ad2_beishu\", () => { this.goNextLevel(); }, () => { this.noAdCallback(); });\r\n    }\r\n    /**获取皮肤入口按钮点击回调 */\r\n    private onBtnGetSkinClick():void {\r\n        if (this.bCanClickSkinBtn) {\r\n            FirebaseReport.reportAdjustParam(\"cgomnj\");\r\n            if (this.bHadGetNewSkin) {//本次已获取了新皮肤\r\n                Utils.showMessage(this.node, \"You`ve got the skin\");\r\n            }\r\n            else {\r\n                FirebaseReport.reportInformation(FirebaseKey.shengli_skin);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_win_4);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_win_4);\r\n                this.showNewSkinPanel();\r\n            }\r\n        }\r\n    }\r\n\r\n    private unlockSkinIndex:number;\r\n\r\n    private showNewSkinPanel():void {\r\n        this.newSkinPanel.active = true;\r\n        \r\n        let roleModel = this.newSkinPanel.getChildByName(\"roleModel\").getComponent(sp.Skeleton);\r\n        let skinDatas = userData.getData(localStorageKey.SHOP_DATAS) as SkinShopItemData[];\r\n        let weaponIdx = userData.getData(localStorageKey.USING_WEAPON_IDX) + 1;\r\n        for (let i = 0; i < skinDatas.length; i++) {\r\n            let data = skinDatas[i];\r\n            if (!data.bUnlock) {//此皮肤未解锁\r\n                this.unlockSkinIndex = i;\r\n                //SpineManager.getInstance().loadSpine(roleModel, \"spine/players/\" + data.resName + \"\" + weaponIdx, true, \"default\", \"daiji\");\r\n\r\n                SpineManager.getInstance().loadSkinSpine(roleModel, this.weapon, true, data.id+1, weaponIdx, \"daiji\");\r\n\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**获取新皮肤面板的看广告按钮点击 */\r\n    private onGetSkinByVideoOfSkinPanelClick():void {\r\n        // if (cc.sys.platform == cc.sys.ANDROID) {\r\n        FirebaseReport.reportInformation(FirebaseKey.shengli_ad2_skin);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.adjust_win_3);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_win_3);\r\n        //     jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/RewardedAdManager\", \"JsCall_showAdIfAvailable\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\",'cc[\"Success\"].JavaCall_getNewSkin()', 'cc[\"Success\"].JavaCall_noAdCallback()', \"shengli_ad2_skin\", \"\");\r\n        // }\r\n        // else {\r\n        //      this.getNewSkin();\r\n        // }\r\n        SdkManager.GetInstance().JavaRewardedAds(\"shengli_ad2_skin\", () => { this.getNewSkin(); }, () => { this.noAdCallback(); });\r\n        this.m_BackFunc = () => { this.getNewSkin(); }\r\n    }\r\n\r\n    public static JavaCall_getNewSkin():void {\r\n        Success._instance.getNewSkin();\r\n    }\r\n\r\n    private getNewSkin():void {\r\n        this.bHadGetNewSkin = true;\r\n        let skinDatas = userData.getData(localStorageKey.SHOP_DATAS) as SkinShopItemData[];\r\n        skinDatas[this.unlockSkinIndex].bUnlock = true;\r\n        userData.setData(localStorageKey.SHOP_DATAS, skinDatas);\r\n        userData.setData(localStorageKey.USING_SKIN_INDEX, this.unlockSkinIndex);//同时设置为正在使用的皮肤\r\n        this.newSkinPanel.active = false;\r\n        Utils.showMessage(this.node, \"Got a new skin\");\r\n        //更新胜利界面玩家皮肤\r\n        let resName = skinDatas[this.unlockSkinIndex].resName;\r\n        let weaponIdx = userData.getData(localStorageKey.USING_WEAPON_IDX) + 1;\r\n        //SpineManager.getInstance().loadSpine(this.roleModel,\"spine/players/\"+resName + \"\" + weaponIdx, true, \"default\", \"shengli\");\r\n\r\n        SpineManager.getInstance().loadSkinSpine(this.roleModel, this.weapon, true, skinDatas[this.unlockSkinIndex].id + 1, weaponIdx, \"daiji\");\r\n    }\r\n\r\n    /**获取新皮肤面板的noThanks按钮点击 */\r\n    private onBtnNoThanksOfSkinPanelClick():void {\r\n        this.newSkinPanel.active = false;\r\n    }\r\n\r\n\r\n    update (dt) {\r\n        let posx = this.randomBar.x;\r\n        if (posx < -198) {\r\n            this.nowPointIndex = 0;\r\n        }\r\n        else if (posx < -125) {\r\n            this.nowPointIndex = 1;\r\n        }\r\n        else if (posx < -47) {\r\n            this.nowPointIndex = 2;\r\n        }\r\n        else if (posx < 44) {\r\n            this.nowPointIndex = 3;\r\n        }\r\n        else if (posx < 123) {\r\n            this.nowPointIndex = 4;\r\n        }\r\n        else if (posx < 195) {\r\n            this.nowPointIndex = 5;\r\n        }\r\n        else {\r\n            this.nowPointIndex = 6;\r\n        }\r\n\r\n        if (this.nowPointIndex != this.lastPointIndex) {\r\n            let nowIndex = this.nowPointIndex;\r\n            let lastIndex = this.lastPointIndex;\r\n            this.lastPointIndex = this.nowPointIndex;\r\n\r\n            this.lb_adReward.string = 100*this.rateArr[nowIndex] + \"\";\r\n\r\n            cc.loader.loadRes(\"texture/game/ui/dx\" + this.rateArr[nowIndex], cc.SpriteFrame, (err, res) => {\r\n                if(err) {\r\n                    return;\r\n                }\r\n                this.pointerArr[nowIndex].spriteFrame = res;\r\n            });\r\n            cc.loader.loadRes(\"texture/game/ui/x\" + this.rateArr[lastIndex], cc.SpriteFrame, (err, res) => {\r\n                if(err) {\r\n                    return;\r\n                }\r\n                this.pointerArr[lastIndex].spriteFrame = res;\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public static JavaCall_noAdCallback():void{\r\n        Success._instance.noAdCallback();\r\n    }\r\n    m_BackFunc:Function = null;\r\n    private noAdCallback():void{\r\n        if (this.m_BackFunc)\r\n        {\r\n            var func = this.m_BackFunc\r\n            Utils.showMessage(this.node, \"Ad not ready\",func);\r\n        }\r\n        else\r\n            Utils.showMessage(this.node, \"Ad not ready\");\r\n        this.m_BackFunc = null;\r\n    }\r\n\r\n    private onSetIcon(spr: cc.Sprite) {\r\n        var strPath: string = \"\";\r\n        if (this.comeInLevel == 1) {\r\n            strPath = \"texture/game/ui/an_noad\";\r\n        }\r\n        else {\r\n            strPath = \"texture/game/ui/an\";\r\n        }        \r\n        cc.loader.loadRes(strPath, cc.SpriteFrame, (err, sp) => {\r\n            spr.spriteFrame = sp as cc.SpriteFrame;\r\n        });\r\n    }\r\n}\r\n"]}