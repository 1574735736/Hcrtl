{"version":3,"sources":["assets\\script\\gameScence\\RoleBase.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\nimport { localStorageKey, userData } from \"../data/UserData\";\nimport PrefabsManager from \"../manager/PrefabsManager\";\nimport { SoundManager } from \"../manager/SoundManager\";\nimport SpineManager from \"../manager/SpineManager\";\nimport SkinShopItem from \"../util/SkinShopItem\";\nimport SkinShopItemData from \"../util/SkinShopItemData\";\nimport Utils from \"../util/Utils\";\n\nconst { ccclass, property } = cc._decorator;\n\nexport enum RoleType {\n    PLAYER,\n    MONSTER,\n    ITEM,\n    OTHER,\n    EGG\n\n}\n\n@ccclass\nexport default class RoleBase extends cc.Component {\n\n    @property(cc.Label)\n    hpLable: cc.Label = null;//血量\n    @property(cc.Label)\n    shieldhpLable: cc.Label = null;//盾血量\n    @property({\n        type: cc.Enum(RoleType),\n    })\n    type: RoleType = RoleType.PLAYER;//玩家类型\n    private ani: sp.Skeleton = null;//动画\n\n    @property(cc.Boolean)\n    hasItem: boolean = false;//是否是增益道具\n\n    @property(cc.Boolean)\n    longRange : boolean = false;//是否是远程攻击\n    @property(cc.Boolean)\n    drop : boolean = false;//是否有掉落\n    @property(cc.Boolean)\n    gain : boolean = false;//是否是增益怪\n\n    @property(cc.Boolean)\n    shield : boolean = false;//是否是盾\n    @property(cc.Boolean)\n    egg : boolean = false;//是否是蛋\n    @property(cc.Prefab)\n    bulletPrefab : cc.Prefab = null;//远程攻击子弹\n\n    @property(sp.Skeleton)\n    LveUp : sp.Skeleton = null;//升级动画\n    private lv = 1;\n    private hp = 0;\n    private shieldHp = 0;\n    private data:any = null;\n    private levels : any= [];\n    private maxHp = 0;\n    public pets = false;\n    private playerAinPath = \"spine/player/pi1\";\n    private playerAinSkin = \"default\";\n\n    onLoad() {\n        \n    }\n\n    start() {\n\n    }\n\n    //血条需要放大的怪\n    private isScaleX(){\n        if(this.node.name.indexOf(\"Bow\")!=-1 || this.node.name.indexOf(\"Vampire\")!=-1 ||\n         this.node.name.indexOf(\"Shield\")!=-1 || this.node.name.indexOf(\"Wizard\")!=-1 ||\n         this.node.name.indexOf(\"Sword\")!=-1){\n            return true;\n        }\n        return false;\n    }\n\n    public init(data) {\n        \n        this.levels[this.lv] = true;\n        if (this.type != RoleType.OTHER && !this.shield) {\n            if(this.isScaleX()){//放大血条\n                this.hpLable.node.scaleX = -2;\n            }else{\n                this.hpLable.node.scaleX = 2;\n            }\n            this.hpLable.node.scaleY = 2;\n        }\n       \n        if(data.data){//\n            this.data = data.data;\n            //盾怪物处理\n            if(this.node.name.indexOf(\"Shield\")!=-1){\n                this.shieldhpLable.node.active = true;\n                this.shieldhpLable.string = this.data.shield_hp;\n                this.shieldhpLable.node.scaleX = -2;\n                this.shieldhpLable.node.scaleY = 2;\n                this.shieldhpLable.node.y +=40;//20\n                this.shieldHp = Number(this.data.shield_hp);\n            }\n        }\n        if (this.type != RoleType.OTHER ) {\n            if(this.type != RoleType.ITEM){//不是道具，播放待机\n                this.ani = this.getComponent(sp.Skeleton);\n                this.idle();\n                // this.attack();\n            }\n            this.hpLable.string = data.hp+\"\";\n            this.hp = Number(data.hp);\n            this.maxHp = this.hp;\n        }\n        //角色处理\n        if(this.type == RoleType.PLAYER){\n            //在这加载角色皮肤\n            let skinDatas = userData.getData(localStorageKey.SHOP_DATAS) as SkinShopItemData[];\n            let usingSkinIndex = userData.getData(localStorageKey.USING_SKIN_INDEX);\n            this.playerAinPath = \"spine/player/\" + skinDatas[usingSkinIndex].resName;\n            this.laodAin();\n\n            if(this.shieldHp == 0){\n                this.shieldhpLable.node.scale = 2;\n                this.shieldhpLable.node.y +=40;//20\n                this.shieldhpLable.node.active = false;\n            }\n        }\n        //蛋处理\n        if(this.type == RoleType.EGG){\n            this.hp = 0;\n            this.hpLable.node.active = false;\n            this.node.y -=100;\n            this.ani = this.getComponent(sp.Skeleton);\n            this.idle();\n        }\n    }\n\n    // public test(index){\n    //     let tempnode = this.node.getChildByName(\"test\");\n    //     if(tempnode == null){\n    //          tempnode =   cc.instantiate(PrefabsManager.getInstance().playerPrefabList[\"hp\"]);\n    //          tempnode.y -=300;\n    //         this.node.addChild(tempnode,999,\"test\");\n    //         tempnode.getComponent(cc.Label).string = \"index: \"+index ;\n    //     }else{\n    //         tempnode.getComponent(cc.Label).string =\"index: \"+index;\n    //     }\n\n      \n    // }\n\n    /**\n     * 是否有宠物\n     * @returns \n     */\n    public isPets(){\n        return this.pets;\n    }\n\n    /**\n     * 获取宠物\n     * @returns \n     */\n    public getPets(){\n        if(this.pets){\n            let pets = this.node.getChildByName(\"pets\");\n            if(pets){\n                let petsRole =  pets.getComponent(RoleBase);\n                return petsRole;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * 为角色增加宠物\n     * @param player \n     * @param cb \n     */\n    public eggAppear(player:RoleBase,cb:Function){\n        this.egg = false;\n        player.pets = true;\n        this.hasItem = false;\n        this.node.scaleX=-1;\n        SoundManager.getInstance().playEffect(SoundManager.ClaimSword);\n        //播放增加宠物动画\n        SpineManager.getInstance().playSpinAnimation(this.ani,\"Egg_Appear\", false, ()=>{\n            let targerPost = this.node.parent.convertToNodeSpaceAR(player.node.parent.convertToWorldSpaceAR(player.node.position));\n            cc.tween( this.node).to(0.1, { position: targerPost }).removeSelf().call(() => {\n                this.node.removeFromParent();\n                player.node.addChild(this.node,1,\"pets\");\n                this.node.x -= 170;\n                this.node.y -= 50;\n                this.node.scale =1;\n                if(cb){\n                    cb(false);\n                }\n                this.hpLable.node.active = true;\n                let hp = player.getHp()/10;\n                this.hp =Math.floor(hp);\n                this.hpLable.string = this.hp.toString();\n                this.idle();\n            }).start();\n        }, this);\n    }\n\n\n    /**\n     * 角色升级动画更新\n     */\n    public updatePlayerAni(){\n        if( this.lv >= 9){\n            this.playerAinPath = \"spine/player/LVL_4\";\n            this.playerAinSkin = \"Skin_3\";\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_4\",true,\"Skin_3\",\"Idle\",);\n        }else if(this.lv >= 8){\n            this.playerAinPath = \"spine/player/LVL_4\";\n            this.playerAinSkin = \"Skin_2\";\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_4\",true,\"Skin_2\",\"Idle\",);\n        }else if(this.lv >= 7){\n            this.playerAinPath = \"spine/player/LVL_4\";\n            this.playerAinSkin = \"Skin_1\";\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_4\",true,\"Skin_1\",\"Idle\",);\n        }else if(this.lv >= 6){\n            this.playerAinPath = \"spine/player/LVL_3\";\n            this.playerAinSkin = \"Skin_3\";\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_3\",true,\"Skin_3\",\"Idle\",);\n        }else if(this.lv >= 5){\n            this.playerAinPath = \"spine/player/LVL_3\";\n            this.playerAinSkin = \"Skin_2\";\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_3\",true,\"Skin_2\",\"Idle\",);\n        }else if(this.lv >= 4){\n            this.playerAinPath = \"spine/player/LVL_3\";\n            this.playerAinSkin = \"Skin_1\";\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_3\",true,\"Skin_1\",\"Idle\",);\n        }else if(this.lv >= 3){\n            this.playerAinPath = \"spine/player/LVL_2\";\n            this.playerAinSkin = \"Skin_3\";\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_2\",true,\"Skin_3\",\"Idle\",);\n        }else if(this.lv >= 2){\n            // this.playerAinPath = \"spine/player/LVL_2\";\n            // this.playerAinSkin = \"Skin_2\";\n            // SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_2\",true,\"Skin_2\",\"Idle\",);\n            this.playerAinPath = \"spine/player/zhu\";\n            this.playerAinSkin = \"Skin_2\";\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/zhu\",true,\"Skin_2\",\"Idle\",);\n        }\n    }\n\n    /**\n     * 重新加载角色动画\n     */\n    public laodAin(){\n        SpineManager.getInstance().loadSpine(this.ani, this.playerAinPath, true, this.playerAinSkin, \"daiji\",);//daiji\n        if(this.isPets()){\n            let pets = this.getPets();\n            if(pets){\n                SpineManager.getInstance().loadSpine(pets.ani,\"spine/player/Dragon\",true,\"Dragon_1\",\"Idle\",);\n            }\n        }\n    \n    }\n\n    /**\n     * 角色升级\n     * @returns \n     */\n    public upLevel(){\n        let lvl = ()=>{\n            if(this.levels[this.lv]){\n                return ;\n            }\n            SoundManager.getInstance().playEffect(SoundManager.Level_UP);\n            SpineManager.getInstance().playSpinAnimation(this.LveUp, \"LVL-up\", false, ()=>{\n                \n               this.updatePlayerAni();\n                this.levels[this.lv] = true;\n                // this.idle();\n            }, this);\n        }\n       if(this.lv >= 9){\n           return;\n       }\n        if(this.hp >=15000 && this.lv <9){\n            this.lv = 9;\n        }else if(this.hp >=12000 && this.lv <8){\n            this.lv = 8;\n        }else if(this.hp >=9000 && this.lv <7){\n            this.lv = 7;\n        }else if(this.hp >=6000 && this.lv <6){\n            this.lv = 6;\n        }else if(this.hp >=3600 && this.lv <5){\n            this.lv = 5;\n        }else if(this.hp >=1800 && this.lv <4){\n            this.lv = 4;\n        }else if(this.hp >=900 && this.lv <3){\n            this.lv = 3;\n        }else if(this.hp >=300 && this.lv <2){\n            this.lv = 2;\n        }\n        lvl();\n    }\n\n    /**\n     * 获取怪物子弹\n     * @returns \n     */\n    public getBulletPrefab(){\n        return this.bulletPrefab;\n    }\n\n    /**\n     * 获取当前血量\n     * @returns \n     */\n    public getHp(){\n        return this.hp;\n    }\n\n    /**\n     * 血量对比\n     * @param targerHp \n     * @returns \n     */\n    public compareHp(targerHp){\n        return this.hp - targerHp > 0;\n    }\n\n    /**\n     * 最大血量\n     * @returns \n     */\n    public getMaxHp(){\n        return this.maxHp;\n    }\n\n    /**\n     * 增加血量\n     * @param targerHp \n     */\n    public addHp(targerHp){\n        this.hp += targerHp;\n        this.maxHp = this.hp;\n        this.hpLable.string = this.hp.toString();\n        let pets = this.getPets();\n        if(pets){//如果有宠物，更新宠物血量\n            pets.hp =Math.floor(this.hp/10);\n            pets.hpLable.string = pets.hp.toString();\n            // pets.addHp(hp);\n        }\n    }\n    \n    /**\n     * 更新盾血量\n     * @param shieldHp \n     */\n    public setShieldHp(shieldHp){\n        this.shieldHp = shieldHp;\n        if(this.type == RoleType.PLAYER){\n            if(this.shieldHp>0){\n                this.shieldhpLable.node.active=true;\n                this.shieldhpLable.string = this.shieldHp.toString();\n            }\n        }\n    }\n\n    /**\n     * 获取盾血量\n     * @returns \n     */\n    public getShieldHp(){\n        return this.shieldHp;\n    }\n\n    /**\n     * 减少血量\n     * @param targerHp \n     * @param cb \n     * @param isPets \n     * @returns \n     */\n    public subHp(targerHp,cb?,isPets:boolean=false){\n        if( this.shieldHp>0 && !isPets){//优先更新盾血量\n            this.shieldHp -= targerHp;\n            this.shieldhpLable.string=this.shieldHp.toString();\n            if(this.shieldHp<=0){\n                this.shieldhpLable.node.active = false;\n            }\n            if(cb){\n                cb(false,true);\n            }\n            return ;\n        }\n        //更新血量\n        this.hp -= targerHp;\n        this.hpLable.string=this.hp.toString();\n        if (this.hp <= 0) {\n            this.hp = 0;\n\n            this.hpLable.node.active = false;\n            //飘血\n            this.creatorFlyHp(targerHp, () => {\n                if (cb) {\n                    cb(true, false);\n                }\n            });\n            return;\n        }\n        this.creatorFlyHp(targerHp,()=>{\n            if(cb){\n                cb(false,false);\n            }\n        });\n    }\n\n    /**\n     * 飘血动画\n     * @param targerHp \n     * @param cb \n     */\n    private creatorFlyHp(targerHp,cb?:Function){\n        this.hpLable.string = this.hp.toString();\n        let tempNode = cc.instantiate(PrefabsManager.getInstance().monsterPrefabList[\"hp\"]);\n        this.node.addChild(tempNode);\n        tempNode.scale = 2;       \n     \n        tempNode.y -= 250; \n        let label = tempNode.getComponent(cc.Label);\n        label.string = \"-\"+targerHp;\n        let targetPos1 = cc.v3(150,-150,0);\n        \n        if(this.type ==RoleType.PLAYER){\n            targetPos1 = cc.v3(-150,-150,0);\n        }else{\n            if(this.isScaleX()){\n                tempNode.scaleX = -2;\n                targetPos1 = cc.v3(-150,-150,0);\n            }\n        }\n        tempNode.zIndex = 50;\n        //飘血完成移除自己\n        cc.tween(tempNode).to(0.5, { position: targetPos1, }).call(()=>{\n            if(cb){\n                cb(false);\n            }\n        }).removeSelf().start();\n    }\n\n\n    /**\n     * 角色跳动画\n     * @param targerPos \n     * @param offset \n     * @param cb \n     */\n    public jumpTo(targerPos, offset, cb?: Function) {\n        let player = this.node;\n        SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue1\", false, () => {//Jump_1\n            SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue2\", false, null, this);//Jump_2\n        }, this);\n        cc.tween(player).bezierTo(0.5, cc.v2(player.x, player.y), cc.v2(100, 400), cc.v2(targerPos.x - offset, targerPos.y)).call(() => {\n            SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue3\", false, null, this);//Jump_3\n            if (cb) {\n                cb();\n            }\n        }).start();\n    }\n\n    public jumpLandTo(targerPos, offset, cb?: Function) {\n        let player = this.node;\n        SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue1\", false, () => {//Jump_1\n            SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue2\", false, null, this);//Jump_2\n        }, this);\n        cc.tween(player).to(0.3, { position: cc.v3(targerPos.x - offset, targerPos.y) }).call(() => {\n            SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue3\", false, null, this);//Jump_3\n            if (cb) {\n                cb();\n            }\n        }).start();\n\n        \n    }\n    /**\n     * 待机\n     */\n    public idle(){\n        let ainName = \"Idle\";\n        let name = this.node.name;\n        if (this.node.name.indexOf(\"Shield\")!=-1) {\n            ainName = \"Shield_Pawn_Idle\";\n        }\n        if(this.egg){\n            ainName = \"Egg_Idle\";\n        }\n        if (this.type == RoleType.PLAYER) {\n            ainName = \"daiji\"//\"daiji2\"\n        }\n        \n        SpineManager.getInstance().playSpinAnimation(this.ani,ainName, true, null, this);\n    }\n\n    /**\n     * \n     * @returns 是否为远程攻击\n     */\n    public isLongRange(){\n        return this.longRange;\n    }\n\n    /**\n     * 攻击\n     * @param cb \n     */\n    public attack(cb?: Function) {\n        let ainName = \"gongji\";\n        if (this.type != RoleType.PLAYER) {//根据不同怪物\n            let name = this.node.name;\n            if (name == \"DualSword\" || name == \"Dragon_2head\") {\n                let index = Utils.randomInt(0, 1);\n                let nameAin = [\"Attack_1\", \"Attack_2\"];\n                ainName = nameAin[index];\n            } else if (name.indexOf(\"Bow\")!=-1|| name == \"Priest\" || name == \"Goblin\" ||\n             name == \"T-rex\" || name == \"Wizard\" || name.indexOf(\"Sword\")!=-1 || this.type == RoleType.EGG) {\n                ainName = \"Attack\";\n            } else if (name.indexOf(\"Shield\")!=-1) {\n                ainName = \"Shield_Pawn_Attack\";\n            } else if (name.indexOf(\"Vampire\")!=-1) {\n                let index = Utils.randomInt(0, 1);\n                let nameAin = [\"Attack\", \"Attack_1\"];\n                ainName = nameAin[index];\n            }\n            else {\n                ainName = \"Attack_1\";\n            }\n        }\n        console.log(\"attack name: \"+ainName);\n        \n        SpineManager.getInstance().playSpinAnimation(this.ani, ainName, false, () => {\n            if (cb) {\n                cb();\n                cb = null;\n            }\n        }, this);\n    }\n\n    /**\n     * 死亡\n     * @param cb \n     */\n    public death(cb?: Function) {\n        let ainName = \"Die\";\n        let name = this.node.name;\n        if (this.node.name.indexOf(\"Shield\")!=-1) {\n            ainName = \"Shield_Pawn_Die\";\n        }\n        if(this.type == RoleType.PLAYER){\n            ainName = \"siwang\";\n            SoundManager.getInstance().playEffect(SoundManager.HeroDie);\n        }\n        SpineManager.getInstance().playSpinAnimation(this.ani, ainName, false, () => {\n            if(this.type == RoleType.MONSTER){\n               \n                if(this.drop){\n                    this.creatorItem();\n                }\n                this.node.removeFromParent();\n                this.node.destroy();\n            }\n            if (cb) {\n                cb();\n            }\n        }, this);\n    }\n\n    /**\n     * 创建一个新物品\n     */\n    private creatorItem(){\n       let tempNode = cc.instantiate(PrefabsManager.getInstance().monsterPrefabList[this.data.prefab]);\n       let role = tempNode.getComponent(RoleBase);\n       role.init(this.data);\n       tempNode.position =this.node.position;\n       this.node.parent.addChild(tempNode, 1, \"item\");\n    }    // update (dt) {}\n}\n"]}