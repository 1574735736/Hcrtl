{"version":3,"sources":["assets\\script\\gameScence\\RoleBase.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;AAClF,6CAA6D;AAC7D,4DAAuD;AACvD,wDAAuD;AACvD,wDAAmD;AAGnD,uCAAkC;AAE5B,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAE5C,IAAY,QAUX;AAVD,WAAY,QAAQ;IAChB,2CAAM,CAAA;IACN,6CAAO,CAAA;IACP,uCAAI,CAAA;IACJ,yCAAK,CAAA;IACL,qCAAG,CAAA;IACH,+CAAQ,CAAA;IACR,2CAAM,CAAA;IACN,+CAAQ,CAAA;AAEZ,CAAC,EAVW,QAAQ,GAAR,gBAAQ,KAAR,gBAAQ,QAUnB;AAGD;IAAsC,4BAAY;IADlD;QAAA,qEAsuBC;QAluBG,aAAO,GAAa,IAAI,CAAC,CAAA,IAAI;QAE7B,mBAAa,GAAa,IAAI,CAAC,CAAA,KAAK;QAIpC,UAAI,GAAa,QAAQ,CAAC,MAAM,CAAC,CAAA,MAAM;QAC/B,SAAG,GAAgB,IAAI,CAAC,CAAA,IAAI;QAGpC,aAAO,GAAY,KAAK,CAAC,CAAA,SAAS;QAGlC,eAAS,GAAa,KAAK,CAAC,CAAA,SAAS;QAErC,UAAI,GAAa,KAAK,CAAC,CAAA,OAAO;QAE9B,UAAI,GAAa,KAAK,CAAC,CAAA,QAAQ;QAG/B,YAAM,GAAa,KAAK,CAAC,CAAA,MAAM;QAE/B,SAAG,GAAa,KAAK,CAAC,CAAA,MAAM;QAE5B,kBAAY,GAAc,IAAI,CAAC,CAAA,QAAQ;QAGvC,cAAQ,GAAY,KAAK,CAAC,CAAA,OAAO;QAGjC,WAAK,GAAY,KAAK,CAAC,CAAA,OAAO;QAG9B,WAAK,GAAgB,IAAI,CAAC,CAAA,MAAM;QAEhC,YAAM,GAAgB,IAAI,CAAC,CAAA,IAAI;QAEvB,QAAE,GAAG,CAAC,CAAC;QACP,QAAE,GAAG,CAAC,CAAC;QACP,cAAQ,GAAG,CAAC,CAAC;QACb,UAAI,GAAO,IAAI,CAAC;QAChB,YAAM,GAAQ,EAAE,CAAC;QACjB,WAAK,GAAG,CAAC,CAAC;QACX,UAAI,GAAG,KAAK,CAAC;QACZ,mBAAa,GAAG,kBAAkB,CAAC;QACnC,mBAAa,GAAG,SAAS,CAAC;QAE1B,cAAQ,GAAW,CAAC,CAAC;QACrB,YAAM,GAAW,CAAC,CAAC;;IAkrB/B,CAAC;iBAruBoB,QAAQ;IAqDzB,yBAAM,GAAN;IAEA,CAAC;IAED,wBAAK,GAAL;IAEA,CAAC;IAED,UAAU;IACF,2BAAQ,GAAhB;QACI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE;YAC3C,OAAO,KAAK,CAAC;SAChB;QACD,IAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAE,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAE,CAAC,CAAC;YAC5E,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAE,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAE,CAAC,CAAC;YAC5E,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAE,CAAC,CAAC,EAAC;YACjC,OAAO,IAAI,CAAC;SACf;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,SAAS;IACD,2BAAQ,GAAhB;QACI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE;YAC9C,OAAO,IAAI,CAAC;SACf;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,uBAAI,GAAX,UAAY,IAAI,EAAE,EAAe;QAE7B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QAEjB,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,QAAQ,EAAE;YAC/E,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC9B,IAAI,OAAO,EAAC,EAAC,MAAM;gBACf,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aACjC;iBAAI;gBACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;aAChC;YACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;SAChC;QAED,IAAG,IAAI,CAAC,IAAI,EAAC,EAAC,EAAE;YACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACtB,OAAO;YACP,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE;gBACxC,IAAI,IAAI,CAAC,aAAa,EAAE;oBACpB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACtC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;oBAChD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBACpC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;oBACnC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA,IAAI;oBACpC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC/C;aACJ;SACJ;QAGD,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,QAAQ,EAAE;YAC/D,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAE,EAAC,WAAW;gBAExC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;gBAC/C,IAAI,CAAC,IAAI,EAAE,CAAC;gBACZ,iBAAiB;aACpB;YACD,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,QAAQ,EAAE;gBAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;aAAE;iBAChE,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,EAAE;gBAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;aAAE;iBAC7E;gBACD,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;aACtC;YACD,IAAI,CAAC,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC;YACrB,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;gBACjB,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;aAC1B;SACJ;QACD,MAAM;QACN,IAAG,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAC;YAC5B,UAAU;YACV,IAAI,SAAS,GAAG,mBAAQ,CAAC,OAAO,CAAC,0BAAe,CAAC,UAAU,CAAuB,CAAC;YACnF,IAAI,cAAc,GAAG,mBAAQ,CAAC,OAAO,CAAC,0BAAe,CAAC,gBAAgB,CAAC,CAAC;YACxE,IAAI,SAAS,GAAG,mBAAQ,CAAC,OAAO,CAAC,0BAAe,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;YAEvE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;YAC1B,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YAE/C,IAAI,CAAC,aAAa,GAAG,gBAAgB,GAAG,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,GAAG,EAAE,GAAG,SAAS,CAAC;YAC3F,IAAI,CAAC,OAAO,EAAE,CAAC;YAEf,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;gBACpB,IAAI,IAAI,CAAC,aAAa,EAAE;oBACpB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;oBAClC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA,IAAI;oBACpC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;iBAC1C;aACJ;SACJ;QACD,KAAK;QACL,IAAG,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,GAAG,EAAC;YACzB,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;YACZ,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAG,GAAG,CAAC;YAClB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;YAC1C,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;IACL,CAAC;IAED,sBAAsB;IACtB,uDAAuD;IACvD,4BAA4B;IAC5B,6FAA6F;IAC7F,6BAA6B;IAC7B,mDAAmD;IACnD,qEAAqE;IACrE,aAAa;IACb,mEAAmE;IACnE,QAAQ;IAGR,IAAI;IAEJ;;;OAGG;IACI,yBAAM,GAAb;QACI,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED;;;OAGG;IACI,0BAAO,GAAd;QACI,IAAG,IAAI,CAAC,IAAI,EAAC;YACT,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YAC5C,IAAG,IAAI,EAAC;gBACJ,IAAI,QAAQ,GAAI,IAAI,CAAC,YAAY,CAAC,UAAQ,CAAC,CAAC;gBAC5C,OAAO,QAAQ,CAAC;aACnB;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED;;;;OAIG;IACI,4BAAS,GAAhB,UAAiB,MAAe,EAAC,EAAW;QAA5C,iBAyBC;QAxBG,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;QACjB,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAC,CAAC,CAAC,CAAC;QACpB,2BAAY,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,2BAAY,CAAC,UAAU,CAAC,CAAC;QAC/D,UAAU;QACV,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAC,YAAY,EAAE,KAAK,EAAE;YACvE,IAAI,UAAU,GAAG,KAAI,CAAC,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACvH,EAAE,CAAC,KAAK,CAAE,KAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAC,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC;gBACrE,KAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBAC7B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,IAAI,EAAC,CAAC,EAAC,MAAM,CAAC,CAAC;gBACzC,KAAI,CAAC,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC;gBACnB,KAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC;gBAClB,KAAI,CAAC,IAAI,CAAC,KAAK,GAAE,CAAC,CAAC;gBACnB,IAAG,EAAE,EAAC;oBACF,EAAE,CAAC,KAAK,CAAC,CAAC;iBACb;gBACD,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBAChC,IAAI,EAAE,GAAG,MAAM,CAAC,KAAK,EAAE,GAAC,EAAE,CAAC;gBAC3B,KAAI,CAAC,EAAE,GAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACxB,KAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;gBACzC,KAAI,CAAC,IAAI,EAAE,CAAC;YAChB,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;QACf,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IAGD;;OAEG;IACI,kCAAe,GAAtB;QACI,OAAO,CAAC,GAAG,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;QACpC,IAAI,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YACb,IAAI,CAAC,aAAa,GAAG,oBAAoB,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,oBAAoB,EAAC,IAAI,EAAC,QAAQ,EAAC,MAAM,CAAE,CAAC;SAC7F;aAAK,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YAClB,IAAI,CAAC,aAAa,GAAG,oBAAoB,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,oBAAoB,EAAC,IAAI,EAAC,QAAQ,EAAC,MAAM,CAAE,CAAC;SAC7F;aAAK,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YAClB,IAAI,CAAC,aAAa,GAAG,oBAAoB,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,oBAAoB,EAAC,IAAI,EAAC,QAAQ,EAAC,MAAM,CAAE,CAAC;SAC7F;aAAK,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YAClB,IAAI,CAAC,aAAa,GAAG,oBAAoB,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,oBAAoB,EAAC,IAAI,EAAC,QAAQ,EAAC,MAAM,CAAE,CAAC;SAC7F;aAAK,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YAClB,IAAI,CAAC,aAAa,GAAG,oBAAoB,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,oBAAoB,EAAC,IAAI,EAAC,QAAQ,EAAC,MAAM,CAAE,CAAC;SAC7F;aAAK,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YAClB,IAAI,CAAC,aAAa,GAAG,oBAAoB,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,oBAAoB,EAAC,IAAI,EAAC,QAAQ,EAAC,MAAM,CAAE,CAAC;SAC7F;aAAK,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YAClB,IAAI,CAAC,aAAa,GAAG,oBAAoB,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,oBAAoB,EAAC,IAAI,EAAC,QAAQ,EAAC,MAAM,CAAE,CAAC;SAC7F;aAAK,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YAClB,6CAA6C;YAC7C,iCAAiC;YACjC,6FAA6F;YAC7F,IAAI,CAAC,aAAa,GAAG,kBAAkB,CAAC;YACxC,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,kBAAkB,EAAC,IAAI,EAAC,QAAQ,EAAC,MAAM,CAAE,CAAC;SAC3F;IACL,CAAC;IACM,4BAAS,GAAhB,UAAiB,SAAS;QACtB,IAAI,SAAS,GAAG,mBAAQ,CAAC,OAAO,CAAC,0BAAe,CAAC,UAAU,CAAuB,CAAC;QACnF,IAAI,cAAc,GAAG,mBAAQ,CAAC,OAAO,CAAC,0BAAe,CAAC,gBAAgB,CAAC,CAAC;QACxE,IAAI,CAAC,aAAa,GAAG,gBAAgB,GAAG,SAAS,CAAC,cAAc,CAAC,CAAC,OAAO,GAAG,EAAE,GAAG,SAAS,CAAC;QAE3F,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;QAC1B,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAE/C,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IACD;;OAEG;IACI,0BAAO,GAAd;QACG,iHAAiH;QAEhH,sBAAY,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QAE3G,IAAG,IAAI,CAAC,MAAM,EAAE,EAAC;YACb,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YAC1B,IAAG,IAAI,EAAC;gBACJ,sBAAY,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,qBAAqB,EAAC,IAAI,EAAC,UAAU,EAAC,MAAM,CAAE,CAAC;aAChG;SACJ;IAEL,CAAC;IAED;;;OAGG;IACI,0BAAO,GAAd;QAAA,iBAkCC;QAjCG,IAAI,GAAG,GAAG;YACN,IAAG,KAAI,CAAC,MAAM,CAAC,KAAI,CAAC,EAAE,CAAC,EAAC;gBACpB,OAAQ;aACX;YACD,2BAAY,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,2BAAY,CAAC,QAAQ,CAAC,CAAC;YAC7D,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,KAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE;gBAEvE,KAAI,CAAC,eAAe,EAAE,CAAC;gBACtB,KAAI,CAAC,MAAM,CAAC,KAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;gBAC5B,eAAe;YACnB,CAAC,EAAE,KAAI,CAAC,CAAC;QACb,CAAC,CAAA;QACF,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;YACZ,OAAO;SACV;QACA,IAAG,IAAI,CAAC,EAAE,IAAG,KAAK,IAAI,IAAI,CAAC,EAAE,GAAE,CAAC,EAAC;YAC7B,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;aAAK,IAAG,IAAI,CAAC,EAAE,IAAG,KAAK,IAAI,IAAI,CAAC,EAAE,GAAE,CAAC,EAAC;YACnC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;aAAK,IAAG,IAAI,CAAC,EAAE,IAAG,IAAI,IAAI,IAAI,CAAC,EAAE,GAAE,CAAC,EAAC;YAClC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;aAAK,IAAG,IAAI,CAAC,EAAE,IAAG,IAAI,IAAI,IAAI,CAAC,EAAE,GAAE,CAAC,EAAC;YAClC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;aAAK,IAAG,IAAI,CAAC,EAAE,IAAG,IAAI,IAAI,IAAI,CAAC,EAAE,GAAE,CAAC,EAAC;YAClC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;aAAK,IAAG,IAAI,CAAC,EAAE,IAAG,IAAI,IAAI,IAAI,CAAC,EAAE,GAAE,CAAC,EAAC;YAClC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;aAAK,IAAG,IAAI,CAAC,EAAE,IAAG,GAAG,IAAI,IAAI,CAAC,EAAE,GAAE,CAAC,EAAC;YACjC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;aAAK,IAAG,IAAI,CAAC,EAAE,IAAG,GAAG,IAAI,IAAI,CAAC,EAAE,GAAE,CAAC,EAAC;YACjC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;QACD,GAAG,EAAE,CAAC;IACV,CAAC;IAED;;;OAGG;IACI,kCAAe,GAAtB;QACI,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED;;;OAGG;IACI,wBAAK,GAAZ;QACI,OAAO,IAAI,CAAC,EAAE,CAAC;IACnB,CAAC;IAED;;;;OAIG;IACI,4BAAS,GAAhB,UAAiB,QAAQ;QACrB,OAAO,IAAI,CAAC,EAAE,GAAG,QAAQ,GAAG,CAAC,CAAC;IAClC,CAAC;IAED;;;OAGG;IACI,2BAAQ,GAAf;QACI,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED;;;OAGG;IACI,wBAAK,GAAZ,UAAa,QAAQ;QACjB,IAAI,CAAC,EAAE,IAAI,QAAQ,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;QACzC,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC1B,IAAG,IAAI,EAAC,EAAC,cAAc;YACnB,IAAI,CAAC,EAAE,GAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAC,EAAE,CAAC,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;YACzC,kBAAkB;SACrB;IACL,CAAC;IAED;;;OAGG;IACI,8BAAW,GAAlB,UAAmB,QAAQ;QACvB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAG,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAC;YAC5B,IAAG,IAAI,CAAC,QAAQ,GAAC,CAAC,EAAC;gBACf,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAC,IAAI,CAAC;gBACpC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;aACxD;SACJ;IACL,CAAC;IAED;;;OAGG;IACI,8BAAW,GAAlB;QACI,OAAO,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED;;;;;;OAMG;IACI,wBAAK,GAAZ,UAAa,QAAQ,EAAC,EAAG,EAAC,MAAoB;QAApB,uBAAA,EAAA,cAAoB;QAC1C,IAAI,IAAI,CAAC,QAAQ,GAAC,CAAC,IAAI,CAAC,MAAM,EAAC,EAAC,SAAS;YACrC,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC;YAC1B,IAAI,CAAC,aAAa,CAAC,MAAM,GAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YACnD,IAAG,IAAI,CAAC,QAAQ,IAAE,CAAC,EAAC;gBAChB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;aAC1C;YACD,IAAG,EAAE,EAAC;gBACF,EAAE,CAAC,KAAK,EAAC,IAAI,CAAC,CAAC;aAClB;YACD,OAAQ;SACX;QACD,MAAM;QACN,IAAI,CAAC,EAAE,IAAI,QAAQ,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;QACvC,IAAI,IAAI,CAAC,EAAE,IAAI,CAAC,EAAE;YACd,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;YAEZ,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACjC,IAAI;YACJ,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;gBACxB,IAAI,EAAE,EAAE;oBACJ,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;iBACnB;YACL,CAAC,CAAC,CAAC;YACH,OAAO;SACV;QACD,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAC;YACvB,IAAG,EAAE,EAAC;gBACF,EAAE,CAAC,KAAK,EAAC,KAAK,CAAC,CAAC;aACnB;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;;OAIG;IACK,+BAAY,GAApB,UAAqB,QAAQ,EAAC,EAAY;QACtC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;QACzC,IAAI,QAAQ,GAAG,EAAE,CAAC,WAAW,CAAC,wBAAc,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;QACpF,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC7B,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC;QAEnB,QAAQ,CAAC,CAAC,IAAI,GAAG,CAAC;QAClB,IAAI,KAAK,GAAG,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC5C,KAAK,CAAC,MAAM,GAAG,GAAG,GAAC,QAAQ,CAAC;QAC5B,IAAI,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC;QAEnC,IAAG,IAAI,CAAC,IAAI,IAAG,QAAQ,CAAC,MAAM,EAAC;YAC3B,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC;SACnC;aAAI;YACD,IAAG,IAAI,CAAC,QAAQ,EAAE,EAAC;gBACf,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBACrB,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC;aACnC;SACJ;QACD,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC;QACrB,UAAU;QACV,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC;YACvD,IAAG,EAAE,EAAC;gBACF,EAAE,CAAC,KAAK,CAAC,CAAC;aACb;QACL,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC,KAAK,EAAE,CAAC;IAC5B,CAAC;IAGD;;;;;OAKG;IACI,yBAAM,GAAb,UAAc,SAAS,EAAE,MAAM,EAAE,EAAa;QAA9C,iBAeC;QAdG,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE;YACtE,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,KAAI,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,KAAI,CAAC,CAAC,CAAA,QAAQ;QAClG,CAAC,EAAE,IAAI,CAAC,CAAC;QAET,IAAI,KAAK,GAAG,mBAAQ,CAAC,UAAU,CAAC;QAChC,IAAI,KAAK,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAE,KAAK;QAEhD,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,GAAG,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC1H,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,KAAI,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,KAAI,CAAC,CAAC,CAAA,QAAQ;YAC9F,IAAI,EAAE,EAAE;gBACJ,EAAE,EAAE,CAAC;aACR;QACL,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;IACf,CAAC;IAEM,6BAAU,GAAjB,UAAkB,SAAS,EAAE,MAAM,EAAE,EAAa;QAAlD,iBAaC;QAZG,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE;YACtE,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,KAAI,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,KAAI,CAAC,CAAC,CAAA,QAAQ;QAClG,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,GAAG,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;YAClF,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,KAAI,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,KAAI,CAAC,CAAC,CAAA,QAAQ;YAC9F,IAAI,EAAE,EAAE;gBACJ,EAAE,EAAE,CAAC;aACR;QACL,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;IAGf,CAAC;IACD;;OAEG;IACI,uBAAI,GAAX;QACI,IAAI,OAAO,GAAG,MAAM,CAAC;QACrB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAC1B,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAE,CAAC,CAAC,EAAE;YACtC,OAAO,GAAG,kBAAkB,CAAC;SAChC;QACD,IAAG,IAAI,CAAC,GAAG,EAAC;YACR,OAAO,GAAG,UAAU,CAAC;SACxB;QACD,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAE;YAC9B,OAAO,GAAG,OAAO,CAAA,CAAA,UAAU;SAC9B;aACI,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,QAAQ,EAAE;YACrC,OAAO,GAAG,QAAQ,CAAA;SACrB;aACI,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAE;YACnC,OAAO,GAAG,QAAQ,CAAA;SACrB;QAGD,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IACrF,CAAC;IAED;;;OAGG;IACI,8BAAW,GAAlB;QACI,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;;OAGG;IACI,yBAAM,GAAb,UAAc,EAAa;QAEvB,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACnC,IAAI,IAAI,CAAC,GAAG,EAAE;SAEb;aACI;SAEJ;QACD,uDAAuD;QACvD,0CAA0C;QAC1C,8CAA8C;QAC9C,kDAAkD;QAClD,mCAAmC;QACnC,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE;YACnE,IAAI,EAAE,EAAE;gBACJ,EAAE,EAAE,CAAC;gBACL,EAAE,GAAG,IAAI,CAAC;aACb;QACL,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IAEO,gCAAa,GAArB;QACI,IAAI,OAAO,GAAG,QAAQ,CAAC;QAEvB,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAE,EAAC,QAAQ;YACvC,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAC1B,IAAI,IAAI,IAAI,WAAW,IAAI,IAAI,IAAI,cAAc,EAAE;gBAC/C,IAAI,KAAK,GAAG,eAAK,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClC,IAAI,OAAO,GAAG,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBACvC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;aAC5B;iBAAM,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,IAAI,QAAQ,IAAI,IAAI,IAAI,QAAQ;gBACxE,IAAI,IAAI,OAAO,IAAI,IAAI,IAAI,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,GAAG,EAAE;gBACjG,OAAO,GAAG,QAAQ,CAAC;aACtB;iBAAM,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE;gBACrC,OAAO,GAAG,oBAAoB,CAAC;aAClC;iBAAM,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE;gBACtC,IAAI,KAAK,GAAG,eAAK,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClC,IAAI,OAAO,GAAG,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;gBACrC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;aAC5B;iBACI;gBACD,OAAO,GAAG,UAAU,CAAC;aACxB;SACJ;aACI,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAE;YACnC,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE;gBACnB,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;oBAC1C,OAAO,GAAG,WAAW,CAAC;iBACzB;qBACI,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;oBACrE,OAAO,GAAG,WAAW,CAAC;iBACzB;qBACI,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;oBAC/C,OAAO,GAAG,WAAW,CAAC;iBACzB;qBACI,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;oBACzB,OAAO,GAAG,WAAW,CAAC;iBACzB;gBACD,4EAA4E;gBAC5E,0BAA0B;gBAC1B,GAAG;aACN;iBACI;gBACD,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;oBAC1D,OAAO,GAAG,WAAW,CAAC;iBACzB;qBACI,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;oBACnF,OAAO,GAAG,WAAW,CAAC;iBACzB;qBACI,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;oBAC3C,OAAO,GAAG,WAAW,CAAC;oBACtB,sBAAsB;iBACzB;aACJ;SAEJ;QACD,OAAO,OAAO,CAAA;IAClB,CAAC;IAED;;;OAGG;IACI,wBAAK,GAAZ,UAAa,EAAa;QAA1B,iBAuBC;QAtBG,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAC1B,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAE,CAAC,CAAC,EAAE;YACtC,OAAO,GAAG,iBAAiB,CAAC;SAC/B;QACD,IAAG,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAC;YAC5B,OAAO,GAAG,QAAQ,CAAC;YACnB,2BAAY,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,2BAAY,CAAC,OAAO,CAAC,CAAC;SAC/D;QACD,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE;YACnE,IAAG,KAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,OAAO,EAAC;gBAE7B,IAAG,KAAI,CAAC,IAAI,EAAC;oBACT,KAAI,CAAC,WAAW,EAAE,CAAC;iBACtB;gBACD,KAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBAC7B,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;aACvB;YACD,IAAI,EAAE,EAAE;gBACJ,EAAE,EAAE,CAAC;aACR;QACL,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IAEM,4BAAS,GAAhB;QACI,OAAO,CAAC,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,CAAA;QACvC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACZ,OAAO;SACV;QACD,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAE;YAC5B,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACzB,IAAI,CAAC,aAAa,EAAE,CAAC;SACxB;aACI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,EAAE;SAElC;IACL,CAAC;IAED;;OAEG;IACK,8BAAW,GAAnB;QACG,IAAI,QAAQ,GAAG,EAAE,CAAC,WAAW,CAAC,wBAAc,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QAChG,IAAI,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,UAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrB,QAAQ,CAAC,QAAQ,GAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACtC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;IAClD,CAAC;IACD,iBAAiB;IAEjB,MAAM;IACE,gCAAa,GAArB;QAGI,IAAI,QAAQ,GAAG,EAAE,CAAC,WAAW,CAAC,wBAAc,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QAC5F,IAAI,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,UAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrB,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACvC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;QAC/C,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC/C,CAAC;IAGM,2BAAQ,GAAf,UAAgB,KAAa,EAAE,EAAa,EAAC,KAAsB;QAAtB,sBAAA,EAAA,aAAsB;QAC/D,IAAI,KAAK,EAAE;YACP,IAAI,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC;gBAC1D,IAAI,EAAE,EAAE;oBACJ,EAAE,EAAE,CAAC;oBACL,EAAE,GAAG,IAAI,CAAC;iBACb;YACL,CAAC,CAAC,CAAC,CAAA;YACH,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;SAC3B;aACI;YACD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SACpC;IACL,CAAC;IAEM,6BAAU,GAAjB,UAAkB,EAAa;QAC3B,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAGnC,kCAAkC;QAClC,uBAAuB;QACvB,yBAAyB;QACzB,+BAA+B;QAC/B,mCAAmC;QAEnC,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE;YAClE,IAAI,EAAE,EAAE;gBACJ,EAAE,EAAE,CAAC;aACR;QACL,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;;IAjuBD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6CACM;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDACY;IAI/B;QAHC,QAAQ,CAAC;YACN,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC;SAC1B,CAAC;0CAC+B;IAIjC;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;6CACI;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;+CACO;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;0CACE;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;0CACE;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;4CACI;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;yCACC;IAEtB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;kDACW;IAG/B;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;8CACK;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;2CACE;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;2CACI;IApCT,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAquB5B;IAAD,eAAC;CAruBD,AAquBC,CAruBqC,EAAE,CAAC,SAAS,GAquBjD;kBAruBoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport { localStorageKey, userData } from \"../data/UserData\";\r\nimport PrefabsManager from \"../manager/PrefabsManager\";\r\nimport { SoundManager } from \"../manager/SoundManager\";\r\nimport SpineManager from \"../manager/SpineManager\";\r\nimport SkinShopItem from \"../util/SkinShopItem\";\r\nimport SkinShopItemData from \"../util/SkinShopItemData\";\r\nimport Utils from \"../util/Utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport enum RoleType {\r\n    PLAYER,\r\n    MONSTER,\r\n    ITEM,\r\n    OTHER,\r\n    EGG,\r\n    PRINCESS,\r\n    Devils,\r\n    Guidance,\r\n\r\n}\r\n\r\n@ccclass\r\nexport default class RoleBase extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    hpLable: cc.Label = null;//血量\r\n    @property(cc.Label)\r\n    shieldhpLable: cc.Label = null;//盾血量\r\n    @property({\r\n        type: cc.Enum(RoleType),\r\n    })\r\n    type: RoleType = RoleType.PLAYER;//玩家类型\r\n    private ani: sp.Skeleton = null;//动画\r\n\r\n    @property(cc.Boolean)\r\n    hasItem: boolean = false;//是否是增益道具\r\n\r\n    @property(cc.Boolean)\r\n    longRange : boolean = false;//是否是远程攻击\r\n    @property(cc.Boolean)\r\n    drop : boolean = false;//是否有掉落\r\n    @property(cc.Boolean)\r\n    gain : boolean = false;//是否是增益怪\r\n\r\n    @property(cc.Boolean)\r\n    shield : boolean = false;//是否是盾\r\n    @property(cc.Boolean)\r\n    egg : boolean = false;//是否是蛋\r\n    @property(cc.Prefab)\r\n    bulletPrefab: cc.Prefab = null;//远程攻击子弹\r\n\r\n    @property(cc.Boolean)\r\n    isWeapon: boolean = false;//是否是武器\r\n\r\n    @property(cc.Boolean)\r\n    isBox: boolean = false;//是否是宝箱\r\n\r\n    @property(sp.Skeleton)\r\n    LveUp: sp.Skeleton = null;//升级动画\r\n\r\n    weapon: sp.Skeleton = null;//武器\r\n\r\n    private lv = 1;\r\n    private hp = 0;\r\n    private shieldHp = 0;\r\n    private data:any = null;\r\n    private levels : any= [];\r\n    private maxHp = 0;\r\n    public pets = false;\r\n    private playerAinPath = \"spine/player/pi1\";\r\n    private playerAinSkin = \"default\";\r\n\r\n    private weaponId: number = 1;\r\n    private skinId: number = 1;\r\n\r\n    onLoad() {\r\n        \r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    //血条需要放大的怪\r\n    private isScaleX() {\r\n        if (this.node.name.indexOf(\"DualSword\") != -1) {\r\n            return false;\r\n        }\r\n        if(this.node.name.indexOf(\"Bow\")!=-1 || this.node.name.indexOf(\"Vampire\")!=-1 ||\r\n         this.node.name.indexOf(\"Shield\")!=-1 || this.node.name.indexOf(\"Wizard\")!=-1 ||\r\n         this.node.name.indexOf(\"Sword\")!=-1){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    //需要扣血的物品\r\n    private isReduce() {\r\n        if (this.node.name.indexOf(\"Item_Barrier\") != -1) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public init(data ,wp: sp.Skeleton) {\r\n        \r\n        this.levels[this.lv] = true;\r\n        this.weapon = wp;\r\n        \r\n        if (this.type != RoleType.OTHER && !this.shield && this.type != RoleType.Guidance) {\r\n            let isScale = this.isScaleX();\r\n            if (isScale){//放大血条\r\n                this.hpLable.node.scaleX = -2;\r\n            }else{\r\n                this.hpLable.node.scaleX = 2;\r\n            }\r\n            this.hpLable.node.scaleY = 2;\r\n        }\r\n        \r\n        if(data.data){//\r\n            this.data = data.data;\r\n            //盾怪物处理\r\n            if (this.node.name.indexOf(\"Shield\") != -1) {\r\n                if (this.shieldhpLable) {\r\n                    this.shieldhpLable.node.active = true;\r\n                    this.shieldhpLable.string = this.data.shield_hp;\r\n                    this.shieldhpLable.node.scaleX = -2;\r\n                    this.shieldhpLable.node.scaleY = 2;\r\n                    this.shieldhpLable.node.y += 40;//20\r\n                    this.shieldHp = Number(this.data.shield_hp);\r\n                }              \r\n            }\r\n        }\r\n       \r\n       \r\n        if (this.type != RoleType.OTHER && this.type != RoleType.Guidance) {\r\n            if (this.type != RoleType.ITEM) {//不是道具，播放待机\r\n                \r\n                this.ani = this.node.getComponent(sp.Skeleton);\r\n                this.idle();\r\n                // this.attack();\r\n            }\r\n            if (this.type == RoleType.PRINCESS) { this.hpLable.string = \"Hana\"; }\r\n            else if (this.type == RoleType.Devils || this.isBox) { this.hpLable.string = \"\"; }\r\n            else {\r\n                this.hpLable.string = data.hp + \"\";\r\n            }              \r\n            this.hp = Number(data.hp);\r\n            this.maxHp = this.hp;\r\n            if (this.isReduce()) {\r\n                this.hp = this.hp * -1;\r\n            }            \r\n        }\r\n        //角色处理\r\n        if(this.type == RoleType.PLAYER){\r\n            //在这加载角色皮肤\r\n            let skinDatas = userData.getData(localStorageKey.SHOP_DATAS) as SkinShopItemData[];\r\n            let usingSkinIndex = userData.getData(localStorageKey.USING_SKIN_INDEX);\r\n            let weaponIdx = userData.getData(localStorageKey.USING_WEAPON_IDX) + 1;\r\n\r\n            this.weaponId = weaponIdx;\r\n            this.skinId = skinDatas[usingSkinIndex].id + 1;\r\n\r\n            this.playerAinPath = \"spine/players/\" + skinDatas[usingSkinIndex].resName + \"\" + weaponIdx;\r\n            this.laodAin();\r\n\r\n            if (this.shieldHp == 0) {\r\n                if (this.shieldhpLable) {\r\n                    this.shieldhpLable.node.scale = 2;\r\n                    this.shieldhpLable.node.y += 40;//20\r\n                    this.shieldhpLable.node.active = false;\r\n                }                \r\n            }\r\n        }\r\n        //蛋处理\r\n        if(this.type == RoleType.EGG){\r\n            this.hp = 0;\r\n            this.hpLable.node.active = false;\r\n            this.node.y -=100;\r\n            this.ani = this.getComponent(sp.Skeleton);\r\n            this.idle();\r\n        }\r\n    }\r\n\r\n    // public test(index){\r\n    //     let tempnode = this.node.getChildByName(\"test\");\r\n    //     if(tempnode == null){\r\n    //          tempnode =   cc.instantiate(PrefabsManager.getInstance().playerPrefabList[\"hp\"]);\r\n    //          tempnode.y -=300;\r\n    //         this.node.addChild(tempnode,999,\"test\");\r\n    //         tempnode.getComponent(cc.Label).string = \"index: \"+index ;\r\n    //     }else{\r\n    //         tempnode.getComponent(cc.Label).string =\"index: \"+index;\r\n    //     }\r\n\r\n      \r\n    // }\r\n\r\n    /**\r\n     * 是否有宠物\r\n     * @returns \r\n     */\r\n    public isPets(){\r\n        return this.pets;\r\n    }\r\n\r\n    /**\r\n     * 获取宠物\r\n     * @returns \r\n     */\r\n    public getPets(){\r\n        if(this.pets){\r\n            let pets = this.node.getChildByName(\"pets\");\r\n            if(pets){\r\n                let petsRole =  pets.getComponent(RoleBase);\r\n                return petsRole;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 为角色增加宠物\r\n     * @param player \r\n     * @param cb \r\n     */\r\n    public eggAppear(player:RoleBase,cb:Function){\r\n        this.egg = false;\r\n        player.pets = true;\r\n        this.hasItem = false;\r\n        this.node.scaleX=-1;\r\n        SoundManager.getInstance().playEffect(SoundManager.ClaimSword);\r\n        //播放增加宠物动画\r\n        SpineManager.getInstance().playSpinAnimation(this.ani,\"Egg_Appear\", false, ()=>{\r\n            let targerPost = this.node.parent.convertToNodeSpaceAR(player.node.parent.convertToWorldSpaceAR(player.node.position));\r\n            cc.tween( this.node).to(0.1, { position: targerPost }).removeSelf().call(() => {\r\n                this.node.removeFromParent();\r\n                player.node.addChild(this.node,1,\"pets\");\r\n                this.node.x -= 170;\r\n                this.node.y -= 50;\r\n                this.node.scale =1;\r\n                if(cb){\r\n                    cb(false);\r\n                }\r\n                this.hpLable.node.active = true;\r\n                let hp = player.getHp()/10;\r\n                this.hp =Math.floor(hp);\r\n                this.hpLable.string = this.hp.toString();\r\n                this.idle();\r\n            }).start();\r\n        }, this);\r\n    }\r\n\r\n\r\n    /**\r\n     * 角色升级动画更新\r\n     */\r\n    public updatePlayerAni() {\r\n        console.log(\"角色动画升级   ：\" + this.lv);\r\n        if( this.lv >= 9){\r\n            this.playerAinPath = \"spine/player/LVL_4\";\r\n            this.playerAinSkin = \"Skin_3\";\r\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_4\",true,\"Skin_3\",\"Idle\",);\r\n        }else if(this.lv >= 8){\r\n            this.playerAinPath = \"spine/player/LVL_4\";\r\n            this.playerAinSkin = \"Skin_2\";\r\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_4\",true,\"Skin_2\",\"Idle\",);\r\n        }else if(this.lv >= 7){\r\n            this.playerAinPath = \"spine/player/LVL_4\";\r\n            this.playerAinSkin = \"Skin_1\";\r\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_4\",true,\"Skin_1\",\"Idle\",);\r\n        }else if(this.lv >= 6){\r\n            this.playerAinPath = \"spine/player/LVL_3\";\r\n            this.playerAinSkin = \"Skin_3\";\r\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_3\",true,\"Skin_3\",\"Idle\",);\r\n        }else if(this.lv >= 5){\r\n            this.playerAinPath = \"spine/player/LVL_3\";\r\n            this.playerAinSkin = \"Skin_2\";\r\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_3\",true,\"Skin_2\",\"Idle\",);\r\n        }else if(this.lv >= 4){\r\n            this.playerAinPath = \"spine/player/LVL_3\";\r\n            this.playerAinSkin = \"Skin_1\";\r\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_3\",true,\"Skin_1\",\"Idle\",);\r\n        }else if(this.lv >= 3){\r\n            this.playerAinPath = \"spine/player/LVL_2\";\r\n            this.playerAinSkin = \"Skin_3\";\r\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_2\",true,\"Skin_3\",\"Idle\",);\r\n        }else if(this.lv >= 2){\r\n            // this.playerAinPath = \"spine/player/LVL_2\";\r\n            // this.playerAinSkin = \"Skin_2\";\r\n            // SpineManager.getInstance().loadSpine(this.ani,\"spine/player/LVL_2\",true,\"Skin_2\",\"Idle\",);\r\n            this.playerAinPath = \"spine/player/zhu\";\r\n            this.playerAinSkin = \"Skin_2\";\r\n            SpineManager.getInstance().loadSpine(this.ani,\"spine/player/zhu\",true,\"Skin_2\",\"Idle\",);\r\n        }\r\n    }\r\n    public loadSpAin(weaponIdx) {\r\n        let skinDatas = userData.getData(localStorageKey.SHOP_DATAS) as SkinShopItemData[];\r\n        let usingSkinIndex = userData.getData(localStorageKey.USING_SKIN_INDEX);\r\n        this.playerAinPath = \"spine/players/\" + skinDatas[usingSkinIndex].resName + \"\" + weaponIdx;     \r\n\r\n        this.weaponId = weaponIdx;\r\n        this.skinId = skinDatas[usingSkinIndex].id + 1;\r\n\r\n        this.laodAin();\r\n    }\r\n    /**\r\n     * 重新加载角色动画\r\n     */\r\n    public laodAin(){\r\n       // SpineManager.getInstance().loadSpine(this.ani, this.playerAinPath, true, this.playerAinSkin, \"daiji\",);//daiji\r\n\r\n        SpineManager.getInstance().loadSkinSpine(this.ani, this.weapon, true, this.skinId, this.weaponId, \"daiji\");\r\n\r\n        if(this.isPets()){\r\n            let pets = this.getPets();\r\n            if(pets){\r\n                SpineManager.getInstance().loadSpine(pets.ani,\"spine/player/Dragon\",true,\"Dragon_1\",\"Idle\",);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n    /**\r\n     * 角色升级\r\n     * @returns \r\n     */\r\n    public upLevel(){\r\n        let lvl = ()=>{\r\n            if(this.levels[this.lv]){\r\n                return ;\r\n            }\r\n            SoundManager.getInstance().playEffect(SoundManager.Level_UP);\r\n            SpineManager.getInstance().playSpinAnimation(this.LveUp, \"LVL-up\", false, ()=>{\r\n                \r\n               this.updatePlayerAni();\r\n                this.levels[this.lv] = true;\r\n                // this.idle();\r\n            }, this);\r\n        }\r\n       if(this.lv >= 9){\r\n           return;\r\n       }\r\n        if(this.hp >=15000 && this.lv <9){\r\n            this.lv = 9;\r\n        }else if(this.hp >=12000 && this.lv <8){\r\n            this.lv = 8;\r\n        }else if(this.hp >=9000 && this.lv <7){\r\n            this.lv = 7;\r\n        }else if(this.hp >=6000 && this.lv <6){\r\n            this.lv = 6;\r\n        }else if(this.hp >=3600 && this.lv <5){\r\n            this.lv = 5;\r\n        }else if(this.hp >=1800 && this.lv <4){\r\n            this.lv = 4;\r\n        }else if(this.hp >=900 && this.lv <3){\r\n            this.lv = 3;\r\n        }else if(this.hp >=300 && this.lv <2){\r\n            this.lv = 2;\r\n        }\r\n        lvl();\r\n    }\r\n\r\n    /**\r\n     * 获取怪物子弹\r\n     * @returns \r\n     */\r\n    public getBulletPrefab(){\r\n        return this.bulletPrefab;\r\n    }\r\n\r\n    /**\r\n     * 获取当前血量\r\n     * @returns \r\n     */\r\n    public getHp() {       \r\n        return this.hp;\r\n    }\r\n\r\n    /**\r\n     * 血量对比\r\n     * @param targerHp \r\n     * @returns \r\n     */\r\n    public compareHp(targerHp){\r\n        return this.hp - targerHp > 0;\r\n    }\r\n\r\n    /**\r\n     * 最大血量\r\n     * @returns \r\n     */\r\n    public getMaxHp(){\r\n        return this.maxHp;\r\n    }\r\n\r\n    /**\r\n     * 增加血量\r\n     * @param targerHp \r\n     */\r\n    public addHp(targerHp) {\r\n        this.hp += targerHp;\r\n        this.maxHp = this.hp;\r\n        this.hpLable.string = this.hp.toString();\r\n        let pets = this.getPets();\r\n        if(pets){//如果有宠物，更新宠物血量\r\n            pets.hp =Math.floor(this.hp/10);\r\n            pets.hpLable.string = pets.hp.toString();\r\n            // pets.addHp(hp);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * 更新盾血量\r\n     * @param shieldHp \r\n     */\r\n    public setShieldHp(shieldHp){\r\n        this.shieldHp = shieldHp;\r\n        if(this.type == RoleType.PLAYER){\r\n            if(this.shieldHp>0){\r\n                this.shieldhpLable.node.active=true;\r\n                this.shieldhpLable.string = this.shieldHp.toString();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取盾血量\r\n     * @returns \r\n     */\r\n    public getShieldHp(){\r\n        return this.shieldHp;\r\n    }\r\n\r\n    /**\r\n     * 减少血量\r\n     * @param targerHp \r\n     * @param cb \r\n     * @param isPets \r\n     * @returns \r\n     */\r\n    public subHp(targerHp,cb?,isPets:boolean=false){\r\n        if( this.shieldHp>0 && !isPets){//优先更新盾血量\r\n            this.shieldHp -= targerHp;\r\n            this.shieldhpLable.string=this.shieldHp.toString();\r\n            if(this.shieldHp<=0){\r\n                this.shieldhpLable.node.active = false;\r\n            }\r\n            if(cb){\r\n                cb(false,true);\r\n            }\r\n            return ;\r\n        }\r\n        //更新血量\r\n        this.hp -= targerHp;\r\n        this.hpLable.string=this.hp.toString();\r\n        if (this.hp <= 0) {\r\n            this.hp = 0;\r\n\r\n            this.hpLable.node.active = false;\r\n            //飘血\r\n            this.creatorFlyHp(targerHp, () => {\r\n                if (cb) {\r\n                    cb(true, false);\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        this.creatorFlyHp(targerHp,()=>{\r\n            if(cb){\r\n                cb(false,false);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 飘血动画\r\n     * @param targerHp \r\n     * @param cb \r\n     */\r\n    private creatorFlyHp(targerHp,cb?:Function){\r\n        this.hpLable.string = this.hp.toString();\r\n        let tempNode = cc.instantiate(PrefabsManager.getInstance().monsterPrefabList[\"hp\"]);\r\n        this.node.addChild(tempNode);\r\n        tempNode.scale = 2;       \r\n     \r\n        tempNode.y -= 250; \r\n        let label = tempNode.getComponent(cc.Label);\r\n        label.string = \"-\"+targerHp;\r\n        let targetPos1 = cc.v3(150,-150,0);\r\n        \r\n        if(this.type ==RoleType.PLAYER){\r\n            targetPos1 = cc.v3(-150,-150,0);\r\n        }else{\r\n            if(this.isScaleX()){\r\n                tempNode.scaleX = -2;\r\n                targetPos1 = cc.v3(-150,-150,0);\r\n            }\r\n        }\r\n        tempNode.zIndex = 50;\r\n        //飘血完成移除自己\r\n        cc.tween(tempNode).to(0.5, { position: targetPos1, }).call(()=>{\r\n            if(cb){\r\n                cb(false);\r\n            }\r\n        }).removeSelf().start();\r\n    }\r\n\r\n\r\n    /**\r\n     * 角色跳动画\r\n     * @param targerPos \r\n     * @param offset \r\n     * @param cb \r\n     */\r\n    public jumpTo(targerPos, offset, cb?: Function) {\r\n        let player = this.node;\r\n        SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue1\", false, () => {//Jump_1\r\n            SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue2\", false, null, this);//Jump_2\r\n        }, this);\r\n\r\n        var tempX = userData.TempStandX;\r\n        var tempY = (player.y + targerPos.y) / 2;  //400\r\n\r\n        cc.tween(player).bezierTo(0.5, cc.v2(player.x, player.y), cc.v2(tempX, tempY), cc.v2(targerPos.x - offset, targerPos.y)).call(() => {\r\n            SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue3\", false, null, this);//Jump_3\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        }).start();\r\n    }\r\n\r\n    public jumpLandTo(targerPos, offset, cb?: Function) {\r\n        let player = this.node;\r\n        SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue1\", false, () => {//Jump_1\r\n            SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue2\", false, null, this);//Jump_2\r\n        }, this);\r\n        cc.tween(player).to(0.3, { position: cc.v3(targerPos.x - offset, targerPos.y) }).call(() => {\r\n            SpineManager.getInstance().playSpinAnimation(this.ani, \"tiaoyue3\", false, null, this);//Jump_3\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        }).start();\r\n\r\n        \r\n    }\r\n    /**\r\n     * 待机\r\n     */\r\n    public idle(){\r\n        let ainName = \"Idle\";\r\n        let name = this.node.name;\r\n        if (this.node.name.indexOf(\"Shield\")!=-1) {\r\n            ainName = \"Shield_Pawn_Idle\";\r\n        }\r\n        if(this.egg){\r\n            ainName = \"Egg_Idle\";\r\n        }\r\n        if (this.type == RoleType.PLAYER) {\r\n            ainName = \"daiji\"//\"daiji2\"\r\n        }\r\n        else if (this.type == RoleType.PRINCESS) {\r\n            ainName = \"ndaiji\"\r\n        }\r\n        else if (this.type == RoleType.Devils) {\r\n            ainName = \"mdaiji\"\r\n        }\r\n\r\n        \r\n        SpineManager.getInstance().playSpinAnimation(this.ani,ainName, true, null, this);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns 是否为远程攻击\r\n     */\r\n    public isLongRange(){\r\n        return this.longRange;\r\n    }\r\n\r\n    /**\r\n     * 攻击\r\n     * @param cb \r\n     */\r\n    public attack(cb?: Function) {\r\n\r\n        let ainName = this.GetAttackName();\r\n        if (this.ani) {\r\n\r\n        }\r\n        else {\r\n           \r\n        }\r\n        //console.log(\" RoleType.PLAYER   \" + RoleType.PLAYER);\r\n        //console.log(\"this.type   \" + this.type);\r\n        //console.log(\"this.skinId   \" + this.skinId);\r\n        //console.log(\"this.weaponId   \" + this.weaponId);\r\n        //cc.log(\"ainName     \" + ainName);\r\n        SpineManager.getInstance().playSpinAnimation(this.ani, ainName, false, () => {\r\n            if (cb) {\r\n                cb();\r\n                cb = null;\r\n            }\r\n        }, this);\r\n    }\r\n\r\n    private GetAttackName() {\r\n        let ainName = \"gongji\";\r\n\r\n        if (this.type != RoleType.PLAYER) {//根据不同怪物\r\n            let name = this.node.name;\r\n            if (name == \"DualSword\" || name == \"Dragon_2head\") {\r\n                let index = Utils.randomInt(0, 1);\r\n                let nameAin = [\"Attack_1\", \"Attack_2\"];\r\n                ainName = nameAin[index];\r\n            } else if (name.indexOf(\"Bow\") != -1 || name == \"Priest\" || name == \"Goblin\" ||\r\n                name == \"T-rex\" || name == \"Wizard\" || name.indexOf(\"Sword\") != -1 || this.type == RoleType.EGG) {\r\n                ainName = \"Attack\";\r\n            } else if (name.indexOf(\"Shield\") != -1) {\r\n                ainName = \"Shield_Pawn_Attack\";\r\n            } else if (name.indexOf(\"Vampire\") != -1) {\r\n                let index = Utils.randomInt(0, 1);\r\n                let nameAin = [\"Attack\", \"Attack_1\"];\r\n                ainName = nameAin[index];\r\n            }\r\n            else {\r\n                ainName = \"Attack_1\";\r\n            }\r\n        }\r\n        else if (this.type == RoleType.PLAYER) {\r\n            if (this.weaponId > 1) {\r\n                if (this.weaponId == 4 || this.weaponId == 6) {\r\n                    ainName = \"gongji2-3\";\r\n                }\r\n                else if (this.weaponId == 2 || this.weaponId == 3 || this.weaponId == 5) {\r\n                    ainName = \"gongji1-2\";\r\n                }\r\n                else if (this.weaponId == 7 || this.weaponId == 8) {\r\n                    ainName = \"gongji3-1\";\r\n                }\r\n                else if (this.weaponId == 9) {\r\n                    ainName = \"gongji3-2\";\r\n                }\r\n                //else if (this.weaponId == 7 || this.weaponId == 8 || this.weaponId == 9) {\r\n                //    ainName = \"gongji3\";\r\n                //}\r\n            }\r\n            else {\r\n                if (this.skinId == 1 || this.skinId == 7 || this.skinId == 9) {\r\n                    ainName = \"gongji2-3\";\r\n                }\r\n                else if (this.skinId == 2 || this.skinId == 4 || this.skinId == 5 || this.skinId == 8) {\r\n                    ainName = \"gongji1-2\";\r\n                }\r\n                else if (this.skinId == 3 || this.skinId == 6) {\r\n                    ainName = \"gongji3-1\";\r\n                    //ainName = \"gongji3\";\r\n                }\r\n            }\r\n\r\n        }\r\n        return ainName\r\n    }\r\n\r\n    /**\r\n     * 死亡\r\n     * @param cb \r\n     */\r\n    public death(cb?: Function) {\r\n        let ainName = \"Die\";\r\n        let name = this.node.name;\r\n        if (this.node.name.indexOf(\"Shield\")!=-1) {\r\n            ainName = \"Shield_Pawn_Die\";\r\n        }\r\n        if(this.type == RoleType.PLAYER){\r\n            ainName = \"siwang\";\r\n            SoundManager.getInstance().playEffect(SoundManager.HeroDie);\r\n        }\r\n        SpineManager.getInstance().playSpinAnimation(this.ani, ainName, false, () => {\r\n            if(this.type == RoleType.MONSTER){\r\n               \r\n                if(this.drop){\r\n                    this.creatorItem();\r\n                }\r\n                this.node.removeFromParent();\r\n                this.node.destroy();\r\n            }\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        }, this);\r\n    }\r\n\r\n    public boxAction() {\r\n        console.log(\"this.data  :\" + this.data)\r\n        if (!this.data) {\r\n            return;\r\n        }\r\n        if (this.data.type == \"weapon\") {\r\n            console.log(\"进入weapon \");\r\n            this.creatorWeapon();\r\n        }\r\n        else if (this.data.type == \"glod\") {\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建一个新物品\r\n     */\r\n    private creatorItem(){\r\n       let tempNode = cc.instantiate(PrefabsManager.getInstance().monsterPrefabList[this.data.prefab]);\r\n       let role = tempNode.getComponent(RoleBase);\r\n       role.init(this.data);\r\n       tempNode.position =this.node.position;\r\n       this.node.parent.addChild(tempNode, 1, \"item\");\r\n    }  \r\n    // update (dt) {}\r\n\r\n    //创建武器\r\n    private creatorWeapon() {\r\n\r\n\r\n        let tempNode = cc.instantiate(PrefabsManager.getInstance().weaponPreList[this.data.prefab]);\r\n        let role = tempNode.getComponent(RoleBase);\r\n        role.init(this.data);\r\n        tempNode.position = this.node.position;\r\n        this.node.parent.addChild(tempNode, 1, \"item\");\r\n        console.log(\"生成出来  ： \" + this.data.prefab);\r\n    }\r\n\r\n\r\n    public SetScale(scale: number, cb?: Function,isAni: boolean = false) {\r\n        if (isAni) {\r\n            var sp = cc.sequence(cc.scaleTo(1, scale, scale), cc.callFunc(() => {\r\n                if (cb) {\r\n                    cb();\r\n                    cb = null;\r\n                }\r\n            }))\r\n            this.node.runAction(sp);    \r\n        }\r\n        else {\r\n            this.node.setScale(scale, scale);\r\n        }\r\n    }\r\n\r\n    public AttackBoss(cb?: Function) {\r\n        let ainName = this.GetAttackName();\r\n\r\n\r\n        //this.ani.setStartListener(null);\r\n        //this.ani.loop = true;\r\n        //this.ani.timeScale = 1;\r\n        //this.ani.animation = ainName;\r\n        //this.ani.setCompleteListener(cb);\r\n\r\n        SpineManager.getInstance().playSpinAnimation(this.ani, ainName, true, () => {\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        }, this);\r\n    }\r\n}\r\n"]}