{"version":3,"sources":["assets\\script\\gameScence\\Lose.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport LoadScene from \"../loadscence/LoadScene\";\nimport GameScence from \"./GameScence\";\nimport { FirebaseReport, FirebaseKey } from \"../util/FirebaseReport\";\nimport LevelData from \"../data/LevelData\";\nimport SpineManager from \"../manager/SpineManager\";\nimport UserData, { localStorageKey, userData } from \"../data/UserData\";\nimport SkinShopItemData from \"../util/SkinShopItemData\";\nimport MainScene from \"../mainScene/MainScene\";\nimport Utils from \"../util/Utils\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Lose extends cc.Component {\n    @property(sp.Skeleton)\n    failAnim:sp.Skeleton = null;\n\n    @property(sp.Skeleton)\n    roleModel:sp.Skeleton = null;\n\n    @property(cc.Node)\n    lb_NoThanks:cc.Node = null;\n\n\n    private static _instance:Lose = null;\n\n    onLoad () {\n        Lose._instance = this;\n    }\n    \n\n    protected onEnable(): void {\n        this.lb_NoThanks.active = false;\n        this.scheduleOnce(()=> {\n            this.lb_NoThanks.active = true;\n        }, 3);\n        SpineManager.getInstance().playSpinAnimation(this.failAnim, \"kaichang\", false, () => {\n            SpineManager.getInstance().playSpinAnimation(this.failAnim, \"chixu\", true, null);\n        });\n        SpineManager.getInstance().playSpinAnimation(this.roleModel, \"siwang\", false, null);\n    }\n\n    private onBtnSkipClick():void {\n        if (cc.sys.platform == cc.sys.ANDROID) {\n            FirebaseReport.reportInformation(FirebaseKey.shengli_ad2_skip);\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/RewardedAdManager\", \"JsCall_showAdIfAvailable\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\",'cc[\"Lose\"].JavaCall_skipNowLevel()', 'cc[\"Lose\"].JavaCall_noAdCallback()', \"shengli_ad2_skip\", \"\");\n        }\n        else {\n            this.skipNowLevel();\n        }\n    }\n\n    /**跳过本关 */\n    private skipNowLevel():void {\n        LevelData.curLevel++;\n        LevelData.saveLevel();\n        GameScence.Instance.restartGame();\n        this.node.active = false;\n    }\n\n    private onBtnNoThanksClick():void {\n        if (cc.sys.platform == cc.sys.ANDROID) {\n            FirebaseReport.reportInformation(FirebaseKey.shengli_playagain);\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/InterstitialAdManager\", \"JsCall_showAdIfAvailable\", \"(Ljava/lang/String;Ljava/lang/String;)V\",'cc[\"Lose\"].JavaCall_playAgain()', \"\");\n        }\n        else {\n            this.playAgain();\n        }\n        \n    }\n    public static JavaCall_playAgain():void {\n        Lose._instance.playAgain();\n    }\n\n    private playAgain():void {\n        GameScence.Instance.restartGame();\n        this.node.active = false;\n    }\n\n    public static JavaCall_skipNowLevel():void {\n        Lose._instance.skipNowLevel();\n    }\n\n    private onBtnHomeClick():void {\n        cc.director.loadScene(\"MainScene\");\n    }\n\n\n    public static JavaCall_noAdCallback():void{\n        Lose._instance.noAdCallback();\n    }\n\n    private noAdCallback():void{\n        Utils.showMessage(this.node, \"Ad not ready\");\n    }\n\n    start () {\n\n    }\n\n\n}\n"]}