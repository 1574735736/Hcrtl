{"version":3,"sources":["assets\\script\\gameScence\\GameScence.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport LevelData from \"../data/LevelData\";\r\nimport TowerLayer from \"./TowerLayer\";\r\nimport { FirebaseReport, FirebaseKey } from \"../util/FirebaseReport\";\r\nimport UserData, { localStorageKey, userData } from \"../data/UserData\";\r\nimport Utils from \"../util/Utils\";\r\nimport RoleBase from \"./RoleBase\";\r\nimport SkinShopItemData from \"../util/SkinShopItemData\";\r\nimport SpineManager from \"../manager/SpineManager\";\r\nimport SdkManager from \"../util/SdkManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n/**\r\n * 游戏场景\r\n */\r\n@ccclass\r\nexport default class GameScence extends cc.Component {\r\n\r\n    //默认塔楼栋数\r\n    private defaultTowerCount = 2;\r\n    //当前塔楼可移动数\r\n    private moveCount = 0;\r\n    //当前塔楼可移动步数\r\n    private moveStep = 0;\r\n    @property(TowerLayer)\r\n    towerLayer : TowerLayer = null;//塔楼层\r\n    @property(cc.Node)\r\n    stageArrowNode : cc.Node = null;//移动箭头\r\n    private level : cc.Node = null;//关卡层\r\n    private next : cc.Node = null;//移到下一栋\r\n    private prev : cc.Node = null;//移到上一栋\r\n    @property([cc.Prefab])\r\n    bg_prefabs : cc.Prefab[] = [];//背景\r\n    @property(cc.Label)\r\n    levelLabel : cc.Label = null;//关卡显示\r\n\r\n    @property(cc.Node)\r\n    wildRage: cc.Node = null;\r\n    @property(cc.Node)\r\n    wildRage2: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    btn_wildRage:cc.Node = null\r\n\r\n    @property(sp.Skeleton)\r\n    roleModel_victory: sp.Skeleton = null;\r\n\r\n    @property(sp.Skeleton)\r\n    roleModel_fail: sp.Skeleton = null;\r\n\r\n    @property(sp.Skeleton)\r\n    weapon: sp.Skeleton = null;\r\n\r\n    private loading = false;\r\n    public static Instance : GameScence = null;\r\n    /**战力提升百分比 */\r\n    private rateOfIncreasePower:number;\r\n\r\n    private initHp:number;\r\n\r\n    private decoration:cc.Node;\r\n\r\n    private static _instance: GameScence = null;\r\n\r\n    curDataIndx: number = 0;\r\n\r\n    onLoad(){\r\n        GameScence._instance = this;\r\n        this.decoration = this.wildRage.getChildByName(\"img_decoration_1\");\r\n        this.restartGame();\r\n        this.initRoleModeOfResult();\r\n    }\r\n\r\n\r\n    restartGame(){\r\n        if(this.loading){\r\n            return ;\r\n        }\r\n\r\n        if (this.towerLayer.canTouck == false) {\r\n            return\r\n        }\r\n\r\n        this.loading = true;\r\n        this.towerLayer.node.removeAllChildren();\r\n        this.stageArrowNode.active = false;\r\n        this.moveStep = 0;\r\n        this.moveCount = 0;\r\n        this.init();\r\n    }\r\n\r\n    init(){\r\n        \r\n        LevelData.getLevel();\r\n        // console.log(\"======all level: \",LevelData.levelData);\r\n        //  LevelData.curLevel = 41;\r\n        //超出最大关卡，显示最后一关\r\n\r\n        //if(LevelData.curLevel >LevelData.levelData.length){\r\n        //    LevelData.curLevel = LevelData.levelData.length;\r\n        //}\r\n        let levelCount = LevelData.curLevel;\r\n        \r\n        this.levelLabel.string = \"Level \" + levelCount;//显示关卡数\r\n        //FirebaseReport.reportInformation(\"level_jinru_\" + levelCount);\r\n        var newlevelCount = levelCount - 1;\r\n        switch (newlevelCount) {\r\n            case 0:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_0);\r\n                break;\r\n            case 1:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_1);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_3);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_3);\r\n                 break;\r\n            case 2:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_2);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_4);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_4);\r\n                 break;\r\n            case 3:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_3);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_5);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_5);\r\n                 break;\r\n            case 4:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_4);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_6);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_6);\r\n                 break;\r\n            case 5:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_5);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_7);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_7);\r\n                 break;\r\n            case 10:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_10);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_8);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_8);\r\n                 break;\r\n            case 15:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_15);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_9);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_9);\r\n                 break;\r\n            case 20:\r\n                FirebaseReport.reportInformation(FirebaseKey.level_jinru_20);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_10);\r\n                FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_10);\r\n                 break;\r\n            default:\r\n                 break;\r\n        }\r\n        this.updateWildRage(levelCount);\r\n        GameScence.Instance = this;\r\n        let level = null;\r\n        //获取关卡数据\r\n        if (LevelData.curLevel > LevelData.levelData.length) {\r\n            this.curDataIndx = this.random(20, LevelData.levelData.length - 1);\r\n            level = LevelData.levelData[this.curDataIndx];\r\n        }\r\n        else {\r\n            this.curDataIndx = levelCount - 1;\r\n            level = LevelData.levelData[this.curDataIndx];\r\n        }\r\n        \r\n        let towerData = level.towerData;//关卡塔楼数据\r\n        this.level = this.node.getChildByName(\"level\");\r\n        let bg  = cc.instantiate(this.bg_prefabs[level.bg]);\r\n        bg.position =  new cc.Vec3(-597.097, 0, 0);\r\n        //增加背景\r\n        this.level.getChildByName(\"bg\").addChild(bg,1);\r\n        this.level.setScale(0.5);\r\n        this.towerLayer.node.x = -400;\r\n        this.levelScale();\r\n        //初始化塔楼数据\r\n        this.towerLayer.init(towerData, this.weapon);\r\n        let size = this.towerLayer.getSize();\r\n        this.moveCount = size - this.defaultTowerCount;\r\n        if(this.moveCount>0){//是否可移动塔楼面板\r\n            this.stageArrowNode.active = true;\r\n            this.next = this.stageArrowNode.getChildByName(\"stage_arrow_next\");\r\n            this.next.active = true;\r\n            this.prev = this.stageArrowNode.getChildByName(\"stage_arrow_prev\");\r\n            this.next.on(cc.Node.EventType.TOUCH_END, this.stageArrowNext, this);\r\n            this.prev.on(cc.Node.EventType.TOUCH_END, this.stageArrowPrev, this);\r\n        }\r\n    }\r\n    /**先一步加载成功和失败界面的spine动画，避免玩家看到闪烁的画面 */\r\n    private initRoleModeOfResult():void {\r\n        let usingIndex = userData.getData(localStorageKey.USING_SKIN_INDEX);\r\n        let skinDatas = userData.getData(localStorageKey.SHOP_DATAS) as SkinShopItemData[];\r\n        let resName = skinDatas[usingIndex].resName;\r\n        let weaponIdx = userData.getData(localStorageKey.USING_WEAPON_IDX) + 1;\r\n        //SpineManager.getInstance().loadSpine(this.roleModel_victory,\"spine/players/\"+resName + \"\" +weaponIdx, true, \"default\", \"shengli\");\r\n        //SpineManager.getInstance().loadSpine(this.roleModel_fail,\"spine/players/\"+resName + \"\" +weaponIdx, true, \"default\", \"siwang\");\r\n\r\n        SpineManager.getInstance().loadSkinSpine(this.roleModel_victory, this.weapon, true, skinDatas[usingIndex].id + 1, weaponIdx, \"daiji\");\r\n        SpineManager.getInstance().loadSkinSpine(this.roleModel_fail, this.weapon, true, skinDatas[usingIndex].id + 1, weaponIdx, \"siwang\");\r\n\r\n    }\r\n    private clickHpIdx: number = 0;\r\n    private addHpMul: number[] = [0.1, 0.15, 0.2 , 0.25, 0.3];\r\n    private randomMul: number[] = [];\r\n    private weaponID: number[] = [];\r\n    func1 = null;\r\n    func2 = null;\r\n    private kuang1: cc.Node = null;\r\n    private kuang2: cc.Node = null;\r\n    private updateWildRage(level:number):void {\r\n        //if (level%3 != 0) {\r\n        //    this.btn_wildRage.active = false;\r\n        //    this.wildRage.active = false;\r\n        //}\r\n        //else {//每三关出现一次\r\n        //    let rand = Math.random();\r\n        //    let value = 0.1;//百分之十\r\n        //    if (rand < 0.4) {\r\n        //        value = 0.1;\r\n        //    }\r\n        //    else if (rand < 0.7) {\r\n        //        value = 0.15;\r\n        //    }\r\n        //    else {\r\n        //        value = 0.2;\r\n        //    }\r\n        //    this.rateOfIncreasePower = value;\r\n        let levelData = LevelData.levelData[this.curDataIndx]//[level-1];\r\n        let towerData = levelData.towerData as any;//关卡塔楼数据\r\n        this.initHp = towerData[0].data[0][0].hp;\r\n        //    this.showWildRage();\r\n        //}\r\n\r\n        this.btn_wildRage.active = true;\r\n\r\n        this.kuang1 = this.wildRage2.getChildByName(\"img_kuang1\");\r\n        this.kuang2 = this.wildRage2.getChildByName(\"img_kuang2\");\r\n        var none = this.wildRage2.getChildByName(\"btn_NoThanks\");\r\n     \r\n        this.kuang1.on(\"click\", () => { this.clickHpIdx = 0; this.OnShowAddHpAds(); }, this);\r\n        this.kuang2.on(\"click\", () => { this.clickHpIdx = 1; this.OnShowAddHpAds(); }, this);\r\n        none.on(\"click\", () => { this.CloseHpPanel(); }, this);\r\n\r\n        \r\n\r\n        var random1 = this.random(0, this.addHpMul.length - 1);\r\n        this.randomMul.push(random1);\r\n        this.randomTwo();\r\n\r\n        this.kuang1.getChildByName(\"txt_addhp\").getComponent(cc.Label).string = \"+\" + Math.floor(this.addHpMul[this.randomMul[0]] * this.initHp);\r\n        this.kuang2.getChildByName(\"txt_addhp\").getComponent(cc.Label).string = \"+\" + Math.floor(this.addHpMul[this.randomMul[1]] * this.initHp); \r\n\r\n        var wrandom1 = this.random(1, 9);\r\n        this.weaponID.push(wrandom1);\r\n        this.wrandomTwo();     \r\n\r\n        var icon1 = this.kuang1.getChildByName(\"img_icon\").getComponent(cc.Sprite);\r\n        var icon2 = this.kuang2.getChildByName(\"img_icon\").getComponent(cc.Sprite);\r\n        this.onSetIcon(icon1, this.weaponID[0] + \"\");\r\n        this.onSetIcon(icon2, this.weaponID[1] + \"\");       \r\n\r\n        this.func1 = cc.sequence(cc.scaleTo(0.3, 1.2, 1.2), cc.scaleTo(0.3, 1, 1), cc.callFunc(() => { this.kuang2.runAction(this.func2); }));\r\n        this.func2 = cc.sequence(cc.scaleTo(0.3, 1.2, 1.2), cc.scaleTo(0.3, 1, 1), cc.callFunc(() => { this.kuang1.runAction(this.func1); }));\r\n\r\n        let levelCount = LevelData.curLevel;\r\n\r\n        if (levelCount > 1) {\r\n            this.scheduleOnce(() => { this.UpHpShow(); }, 1)\r\n        }\r\n        else {\r\n            FirebaseReport.reportAdjustParam(FirebaseKey.adjust_level_1);\r\n            FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_level_1);\r\n            this.scheduleOnce(() => { this.towerLayer.PrinceTalk(); }, 1)\r\n        }\r\n    }\r\n\r\n    private random(lower, upper) {\r\n        return Math.floor(Math.random() * (upper - lower)) + lower;\r\n    }\r\n\r\n    private randomTwo() {\r\n        var random2 = this.random(0, this.addHpMul.length - 1);\r\n        if (random2 == this.randomMul[0]) {\r\n            this.randomTwo();\r\n        }\r\n        else {\r\n            this.randomMul.push(random2);\r\n        }\r\n    }\r\n\r\n    private wrandomTwo() {\r\n        var wrandom2 = this.random(1, 9);\r\n        if (wrandom2 == this.weaponID[0]) {\r\n            this.wrandomTwo();\r\n        }\r\n        else {\r\n            this.weaponID.push(wrandom2);\r\n        }\r\n    }\r\n\r\n    private OnShowAddHpAds() {\r\n      \r\n        FirebaseReport.reportInformation(FirebaseKey.zhandou_ad2_shuxing);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.adjust_property_1);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_property_1);\r\n        var self = this;        \r\n        SdkManager.GetInstance().JavaRewardedAds(FirebaseKey.zhandou_ad2_shuxing, () => { self.GetHpAni(); }, () => { self.noAdCallback(); });\r\n        this.m_BackFunc = () => { self.GetHpAni(); } \r\n    }\r\n\r\n    private CloseHpPanel() {\r\n        FirebaseReport.reportAdjustParam(\"falxom\");\r\n        this.towerLayer.canTouck = true;\r\n        this.wildRage2.active = false;\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.adjust_property_2);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_property_2);\r\n    }\r\n\r\n    private GetHpAni() {\r\n       \r\n        this.wildRage2.active = false;\r\n        this.towerLayer.canTouck = true;\r\n        FirebaseReport.reportAdjustParam(\"4kit8e\");\r\n        this.towerLayer.addPlayerAniHp(this.weaponID[this.clickHpIdx], Math.floor(this.addHpMul[this.randomMul[this.clickHpIdx]] * this.initHp));\r\n    }\r\n\r\n    private UpHpShow() {\r\n        this.towerLayer.canTouck = false;\r\n        this.wildRage2.setScale(0, 0);\r\n        this.wildRage2.active = true;\r\n        this.kuang1.stopAllActions();\r\n        this.kuang2.stopAllActions();\r\n        this.wildRage2.runAction(cc.scaleTo(0.3, 1, 1));   \r\n        this.kuang1.runAction(this.func1);       \r\n    }\r\n\r\n    private onSetIcon(spr: cc.Sprite, iconPath: string) {\r\n        var strPath: string = \"texture/game/weapon/wq\"//\"texture/game/gamepopup/d\";\r\n        strPath = strPath + iconPath;\r\n        cc.loader.loadRes(strPath, cc.SpriteFrame, (err, sp) => {\r\n            spr.spriteFrame = sp as cc.SpriteFrame;\r\n        });\r\n    }\r\n\r\n    /**展示战力提升弹窗 */ss\r\n    private showWildRage():void {\r\n        this.btn_wildRage.active = true;\r\n        this.wildRage.active = true;\r\n        let num_power = this.decoration.getChildByName(\"num_increasePower\").getComponent(cc.Label);\r\n        num_power.string = \"+\" + Math.floor(this.rateOfIncreasePower * this.initHp);\r\n        this.decoration.y = 70;\r\n        this.changeDecorationPos();\r\n    }\r\n\r\n    private changeDecorationPos():void {\r\n        cc.Tween.stopAllByTarget(this.decoration);\r\n        cc.tween(this.decoration)\r\n        .to(0.5, {y:90})\r\n        .to(0.5, {y:70})\r\n        .call(()=> {\r\n            this.changeDecorationPos();\r\n        })\r\n        .start();\r\n    }\r\n\r\n    private onBtnWildRageClick():void {\r\n        //this.showWildRage();\r\n        if (this.towerLayer.canTouck == false) {\r\n            return\r\n        }\r\n        FirebaseReport.reportAdjustParam(\"ta0lk2\");\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.adjust_game_3);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_game_3);\r\n        this.UpHpShow();\r\n    }\r\n\r\n    private onBtnNoThanksOfWildRageClick(): void {\r\n\r\n        this.wildRage.active = false;\r\n    }\r\n\r\n    private onBtnObtainClick():void {\r\n        // if (cc.sys.platform == cc.sys.ANDROID) {\r\n             FirebaseReport.reportInformation(FirebaseKey.zhandou_ad2_shuxing);\r\n        //     jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/RewardedAdManager\", \"JsCall_showAdIfAvailable\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\",'cc[\"GameScence\"].JavaCall_addPlayerHp()', 'cc[\"GameScence\"].JavaCall_noAdCallback()', \"zhandou_ad2_shuxing\", \"\");\r\n        // }\r\n        // else {\r\n        //      this.addPlayerHp();\r\n        // }\r\n        SdkManager.GetInstance().JavaRewardedAds(\"zhandou_ad2_shuxing\", () => { this.addPlayerHp(); }, () => { this.noAdCallback(); })  \r\n        this.m_BackFunc = () => { this.addPlayerHp(); };  \r\n    }\r\n\r\n    /** */\r\n    public static JavaCall_addPlayerHp():void {\r\n        GameScence._instance.addPlayerHp();\r\n    }\r\n    /** */\r\n    private addPlayerHp():void {\r\n        this.wildRage.active = false;\r\n        this.towerLayer.addPlayerHp(Math.floor(this.rateOfIncreasePower * this.initHp));\r\n    }\r\n\r\n    private onBtnHomeClick(): void {      \r\n\r\n        if (this.towerLayer.canTouck == false) {\r\n            return\r\n        }\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.adjust_game_1);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_game_1);\r\n        FirebaseReport.reportAdjustParam(\"2f62iq\");\r\n        FirebaseReport.reportInformation(FirebaseKey.zhandou_shouye);\r\n        if (userData.GetIntAdStatus()) {\r\n            SdkManager.GetInstance().JavaInterstitialAds(FirebaseKey.zhandou_shouye, () => {\r\n                cc.director.loadScene(\"MainScene\");\r\n            })\r\n        }\r\n        else {            \r\n            cc.director.loadScene(\"MainScene\");\r\n        }                \r\n    }\r\n\r\n    /**\r\n     * 下一关\r\n     */\r\n    public onBtnSkipLevel() {\r\n\r\n        if (this.towerLayer.canTouck == false) {\r\n            return\r\n        }\r\n\r\n        FirebaseReport.reportAdjustParam(\"9re0dr\");\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.adjust_game_2);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_game_2);\r\n        // if (cc.sys.platform == cc.sys.ANDROID) {\r\n        FirebaseReport.reportInformation(FirebaseKey.zhandou_ad2_skip);\r\n        //     jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/RewardedAdManager\", \"JsCall_showAdIfAvailable\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\",'cc[\"GameScence\"].JavaCall_skipLevel()', 'cc[\"GameScence\"].JavaCall_noAdCallback()', \"zhandou_ad2_skip\", \"\");\r\n        // }\r\n        // else {\r\n        //      this.skipLevel();\r\n        // }\r\n\r\n        SdkManager.GetInstance().JavaRewardedAds(\"zhandou_ad2_skip\", () => { this.skipLevel(); }, () => { this.noAdCallback(); })  \r\n        this.m_BackFunc = () => { this.skipLevel(); }; \r\n        \r\n    }\r\n\r\n    public static JavaCall_skipLevel():void {\r\n        GameScence._instance.skipLevel();\r\n    }\r\n\r\n    private skipLevel():void {\r\n        if(this.loading){\r\n            return ;\r\n        }\r\n        LevelData.curLevel++;\r\n        LevelData.saveLevel();\r\n        //this.restartGame();\r\n        cc.director.loadScene('GameScene');\r\n    }\r\n\r\n    public onReloadLevel(): void {\r\n        //this.restartGame();\r\n        cc.director.loadScene('GameScene');\r\n    }\r\n\r\n    /**\r\n     * 重玩\r\n     */\r\n    public onBtnRestartClick(): void{\r\n\r\n        if (this.towerLayer.canTouck == false) {\r\n            return\r\n        }\r\n\r\n        if(this.loading){\r\n            return ;\r\n        }\r\n        FirebaseReport.reportAdjustParam(\"26hfya\");\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.adjust_game_4);\r\n        FirebaseReport.reportAdjustParam(FirebaseKey.G8adjust_game_4);\r\n        FirebaseReport.reportInformation(FirebaseKey.zhandou_playagain);\r\n         cc.director.loadScene( 'GameScene');\r\n        //this.restartGame();\r\n    }\r\n \r\n    /**\r\n     * 刷新可移动塔楼数\r\n     */\r\n    public flushMoveCount(){\r\n        let size = this.towerLayer.getSize();\r\n        this.moveCount = size - this.defaultTowerCount;\r\n        if(size <=2){\r\n            if(this.next){\r\n                this.next.active = false;\r\n            }\r\n           if(this.prev){\r\n            this.prev.active = false;\r\n           }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 下一栋塔楼\r\n     */\r\n    private stageArrowNext() {\r\n\r\n        if (this.towerLayer.canTouck == false) {\r\n            return\r\n        }\r\n\r\n       \r\n        if(this.moveCount > this.moveStep){\r\n            cc.tween(this.towerLayer.node).by(0.1, { position: cc.v3(-this.towerLayer.getTowerOffsetX(), 0, 0) }).start(); //, { easing: 'sineOutIn'}\r\n            this.moveStep++;\r\n        }\r\n        if(this.moveCount  == this.moveStep){\r\n            this.next.active = false;\r\n            this.prev.active = true;\r\n        }else{\r\n            this.next.active = true;\r\n            this.prev.active = true; \r\n        }\r\n    }\r\n\r\n    //上一栋塔楼\r\n    private stageArrowPrev() {\r\n\r\n        if (this.towerLayer.canTouck == false) {\r\n            return\r\n        }\r\n\r\n\r\n        if(this.moveStep>0){\r\n            cc.tween(this.towerLayer.node).by(0.1, {position: cc.v3(this.towerLayer.getTowerOffsetX(), 0, 0)}).start();\r\n            this.moveStep--;\r\n        }\r\n        if(this.moveStep==0){\r\n            this.next.active = true;\r\n            this.prev.active = false;\r\n        }else{\r\n            this.next.active = true;\r\n            this.prev.active = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 放大到初始大小\r\n     */\r\n    private levelScale(){\r\n        cc.tween(this.node).delay(0.5).call(()=>{\r\n            cc.tween(this.level).to(0.3, {scale: 1}).start();\r\n            cc.tween(this.towerLayer.node).to(0.3, {position: cc.v3(this.towerLayer.node.x+400,this.towerLayer.node.y,0)}).call(()=>{\r\n                this.loading = false;\r\n            }).start();\r\n        }).start(); \r\n   \r\n    }\r\n\r\n    public static JavaCall_noAdCallback():void{\r\n        GameScence._instance.noAdCallback();\r\n    }\r\n\r\n    m_BackFunc:Function = null;\r\n    private noAdCallback():void{\r\n        if(this.m_BackFunc)    \r\n        {\r\n            var func =   this.m_BackFunc \r\n            Utils.showMessage(this.node, \"Ad not ready\",func);\r\n        }        \r\n        else\r\n            Utils.showMessage(this.node, \"Ad not ready\");    \r\n       /* this.InitAdView();*/\r\n       this.m_BackFunc = null;\r\n    }\r\n   \r\n    // update (dt) {}\r\n\r\n    //public InitAdView() {\r\n    //    var self = this;\r\n    //    cc.loader.loadRes(\"prefabs/popup/AndroidAdView\", cc.Prefab, (e, p) => {\r\n    //        var pnode = cc.instantiate(p as cc.Prefab);\r\n    //        self.node.addChild(pnode, 90);\r\n    //    });\r\n    //}\r\n}\r\n"]}